"use strict";var pt=Object.defineProperty;var n=(o,C)=>pt(o,"name",{value:C,configurable:!0});var D=(o,C)=>()=>(C||o((C={exports:{}}).exports,C),C.exports);var Ae=D((ft,Ne)=>{"use strict";Ne.exports={number:"numeric",string:"text",date:"date",timestamp:"timestamp",binary:"bytea",boolean:"boolean",document:"jsonb",array:"jsonb",objectId:"uuid",default:"char"}});var $e=D((Ot,Ce)=>{"use strict";Ce.exports={char:{size:1},varchar:{mode:"varying"},text:{mode:"text"},bit:{size:1,mode:"bit"},varbit:{size:1,mode:"varying"},tsvector:{mode:"text"},tsquery:{mode:"text"},smallint:{capacity:2},integer:{capacity:4},bigint:{capacity:8},numeric:{capacity:12,mode:"decimal"},real:{capacity:4,mode:"floating"},"double precision":{capacity:8,mode:"floating"},smallserial:{capacity:2},serial:{capacity:4},bigserial:{capacity:8},money:{capacity:8,mode:"decimal"},bytea:{size:4,mode:"binary"},date:{format:"YYYY-MM-DD"},time:{format:"hh:mm:ss.nnnnnn"},timestamp:{format:"YYYY-MM-DD hh:mm:ss"},interval:{format:"PnYnMnDTnHnMnS"},boolean:{mode:"boolean"},int4range:{mode:"range",modeType:"integer",capacity:4},int8range:{mode:"range",modeType:"integer",capacity:8},numrange:{mode:"range",modeType:"decimal",capacity:12},daterange:{mode:"range",modeType:"date",format:"YYYY-MM-DD"},tsrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},int4multirange:{mode:"multirange",modeType:"integer",capacity:4},int8multirange:{mode:"multirange",modeType:"integer",capacity:8},nummultirange:{mode:"multirange",modeType:"decimal",capacity:12},datemultirange:{mode:"multirange",modeType:"date",format:"YYYY-MM-DD"},tsmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},geometry:{format:"euclidian",mode:"geospatial"},geography:{format:"euclidian",mode:"geospatial"},box2d:{format:"euclidian",mode:"geospatial"},box3d:{format:"euclidian",mode:"geospatial"},geometry_dump:{format:"euclidian",mode:"geospatial"},point:{format:"euclidian",mode:"geospatial"},line:{format:"euclidian",mode:"geospatial"},lseg:{format:"euclidian",mode:"geospatial"},box:{format:"euclidian",mode:"geospatial"},path:{format:"euclidian",mode:"geospatial"},polygon:{format:"euclidian",mode:"geospatial"},circle:{format:"euclidian",mode:"geospatial"},inet:{mode:"ip"},cidr:{mode:"ip"},macaddr:{},macaddr8:{},uuid:{mode:"uuid"},oid:{mode:"uuid"},regclass:{},regcollation:{},regconfig:{},regdictionary:{},regnamespace:{},regoper:{},regoperator:{},regproc:{},regprocedure:{},regrole:{},regtype:{},xml:{mode:"xml"},json:{format:"semi-structured"},jsonb:{format:"semi-structured"},composite:{format:"semi-structured",mode:"object"},enum:{mode:"enum"},range_udt:{mode:"range"},domain:{mode:"domain"}}});var Oe=D((Rt,fe)=>{"use strict";fe.exports={createDatabase:"CREATE DATABASE ${name}${template}${encoding}${locale}${collate}${characterClassification}${tablespace};\n",createSchema:"CREATE SCHEMA${ifNotExist} ${name};\nSET search_path TO ${name};\n\n${comment}\n",comment:"COMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${temporary} TABLE${ifNotExist} ${name} (\n${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n)${options};\n\n${comment}${columnDescriptions}",createTablePartitionOf:"CREATE${temporary} TABLE${ifNotExist} ${name}\n${partitionOf} ${openParenthesis}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n${closeParenthesis}${options};\n\n${comment}${columnDescriptions}",columnDefinition:"${name} ${type}${collation}${primaryKey}${uniqueKey}${defaultValue}${notNull}",checkConstraint:"${name} CHECK (${expression})",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${match}${onDelete}${onUpdate}${deferrable}${deferrableConstraintCheckTime}",createKeyConstraint:"${constraintName}${keyType}${columns}${includeNonKey}${storageParameters}${tablespace}",alterColumnType:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET DATA TYPE ${dataType};",addNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET NOT NULL;",dropNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} DROP NOT NULL;",renameColumn:"ALTER TABLE IF EXISTS ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",addCheckConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD CONSTRAINT ${constraintName} CHECK (${expression});",dropConstraint:"ALTER TABLE IF EXISTS ${tableName} DROP CONSTRAINT IF EXISTS ${constraintName};",createForeignKey:"ALTER TABLE IF EXISTS ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable}(${primaryKey})${match}${onDelete}${onUpdate}${deferrable}${deferrableConstraintCheckTime};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",addPkConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD ${constraintStatement};",dropTable:"DROP TABLE IF EXISTS ${tableName};",addColumn:"ALTER TABLE IF EXISTS ${tableName} ADD COLUMN IF NOT EXISTS ${columnDefinition};",dropColumn:"ALTER TABLE IF EXISTS ${tableName} DROP COLUMN IF EXISTS ${columnName};",dropDomain:"DROP DOMAIN IF EXISTS ${udtName};",dropType:"DROP TYPE IF EXISTS ${udtName};",alterTypeAddAttribute:"ALTER TYPE ${udtName} ADD ATTRIBUTE ${columnDefinition};",alterTypeDropAttribute:"ALTER TYPE ${udtName} DROP ATTRIBUTE IF EXISTS ${attributeName};",alterTypeRenameAttribute:"ALTER TYPE ${udtName} RENAME ATTRIBUTE ${oldAttributeName} TO ${newAttributeName};",alterTypeChangeAttributeType:"ALTER TYPE ${udtName} ALTER ATTRIBUTE ${attributeName} SET DATA TYPE ${newDataType};",updateCommentOnTable:"COMMENT ON TABLE ${tableName} IS ${comment};",updateCommentOnColumn:"COMMENT ON COLUMN ${columnName} IS ${comment};",updateCommentOnSchema:"COMMENT ON SCHEMA ${schemaName} IS ${comment};",updateCommentOnView:"COMMENT ON VIEW ${viewName} IS ${comment};",createSchemaOnly:"CREATE SCHEMA IF NOT EXISTS ${schemaName};",dropSchema:"DROP SCHEMA IF EXISTS ${schemaName};",index:"CREATE${unique} INDEX${concurrently}${ifNotExist} ${name}\n ON${only} ${tableName}${using}${keys}${options};\n",createView:"CREATE${orReplace}${temporary} VIEW ${name}${withOptions}\nAS ${selectStatement}${checkOption};\n\n${comment}\n",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",dropView:"DROP VIEW IF EXISTS ${viewName};",createFunction:"CREATE${orReplace} FUNCTION ${name}\n	(${parameters})\n	RETURNS ${returnType}\n	LANGUAGE ${language}\n${properties}AS $BODY$\n${definition}\n$BODY$;\n",createProcedure:"CREATE${orReplace} PROCEDURE ${name} (${parameters})\n	LANGUAGE ${language}\nAS $BODY$\n${body}\n$BODY$;\n",createCompositeType:`CREATE TYPE \${name} AS (
	\${columnDefinitions}
);

\${comment}`,createEnumType:"CREATE TYPE ${name} AS ENUM (${values});\n\n${comment}",createRangeType:"CREATE TYPE ${name} AS RANGE (\n	SUBTYPE=${subtype}${options}\n);\n\n${comment}",createDomainType:"CREATE DOMAIN ${name} AS ${underlyingType}${notNull}${collate}${default}${constraints};\n\n${comment}",createTrigger:"CREATE${orReplace}${constraint} TRIGGER ${name} ${actionTiming} ${events}\n	ON ${tableName}\n${options}	EXECUTE ${functionKey} ${functionName};\n"}});var be=D((bt,Re)=>{"use strict";var Tt=Object.freeze({ALL:"ALL",ANALYSE:"ANALYSE",ANALYZE:"ANALYZE",AND:"AND",ANY:"ANY",ARRAY:"ARRAY",ASC:"ASC",ASYMMETRIC:"ASYMMETRIC",AUTHORIZATION:"AUTHORIZATION",BINARY:"BINARY",BOTH:"BOTH",CASE:"CASE",CAST:"CAST",CHECK:"CHECK",COLLATE:"COLLATE",COLUMN:"COLUMN",CONCURRENTLY:"CONCURRENTLY",CONSTRAINT:"CONSTRAINT",CREATE:"CREATE",CROSS:"CROSS",CURRENT_CATALOG:"CURRENT_CATALOG",CURRENT_DATE:"CURRENT_DATE",CURRENT_ROLE:"CURRENT_ROLE",CURRENT_SCHEMA:"CURRENT_SCHEMA",CURRENT_TIME:"CURRENT_TIME",CURRENT_TIMESTAMP:"CURRENT_TIMESTAMP",CURRENT_USER:"CURRENT_USER",DEFAULT:"DEFAULT",DEFERRABLE:"DEFERRABLE",DESC:"DESC",DISTINCT:"DISTINCT",DO:"DO",ELSE:"ELSE",END:"END",EXCEPT:"EXCEPT",FALSE:"FALSE",FOR:"FOR",FOREIGN:"FOREIGN",FREEZE:"FREEZE",FROM:"FROM",FULL:"FULL",GRANT:"GRANT",GROUP:"GROUP",HAVING:"HAVING",ILIKE:"ILIKE",IN:"IN",INITIALLY:"INITIALLY",INTERSECT:"INTERSECT",INTO:"INTO",IS:"IS",ISNULL:"ISNULL",JOIN:"JOIN",LATERAL:"LATERAL",LEADING:"LEADING",LEFT:"LEFT",LIKE:"LIKE",LIMIT:"LIMIT",LOCALTIME:"LOCALTIME",LOCALTIMESTAMP:"LOCALTIMESTAMP",NATURAL:"NATURAL",NOT:"NOT",NULL:"NULL",OFFSET:"OFFSET",ON:"ON",ONLY:"ONLY",OR:"OR",ORDER:"ORDER",OUTER:"OUTER",OVERLAPS:"OVERLAPS",PLACING:"PLACING",PRIMARY:"PRIMARY",REFERENCES:"REFERENCES",RETURNING:"RETURNING",RIGHT:"RIGHT",SELECT:"SELECT",SESSION_USER:"SESSION_USER",SIMILAR:"SIMILAR",SOME:"SOME",SYMMETRIC:"SYMMETRIC",TABLE:"TABLE",TABLESAMPLE:"TABLESAMPLE",THEN:"THEN",TO:"TO",TRAILING:"TRAILING",TRUE:"TRUE",UNION:"UNION",UNIQUE:"UNIQUE",USER:"USER",USING:"USING",VARIADIC:"VARIADIC",VERBOSE:"VERBOSE",WHEN:"WHEN",WHERE:"WHERE",WINDOW:"WINDOW",WITH:"WITH"}),gt=Object.values(Tt);Re.exports={ReservedWordsAsArray:gt}});var Se=D((It,Ie)=>{"use strict";var{ReservedWordsAsArray:Et}=be(),dt=/\t|\n|'|\f|\r/gm;Ie.exports=o=>{let C=n(a=>o.get(a,"[0].code")||o.get(a,"[0].name",""),"getDbName"),f=n(a=>a&&(a.code||a.collectionName)||"","getEntityName"),p=n(a=>a&&(a.code||a.name)||"","getViewName"),R=n(a=>Object.assign({},o.get(a,"[0]",{}),{name:C(a)}),"getDbData"),b=n(a=>o.get(a,"[0].viewOn"),"getViewOn"),L=n(a=>Object.keys(a).reduce((E,$)=>{let h=a[$].filter(v=>{let Z=a[v.primaryTableId];return Array.isArray(Z)?!Z.some(G=>G.primaryTableId===$&&G.primaryTableId!==G.foreignTableId):!0});return o.isEmpty(h)?E:Object.assign({},E,{[$]:h})},{}),"rejectRecursiveRelationships"),F=n(a=>Object.keys(a).reduce((E,$)=>{let h=a[$].filter(v=>{let Z=a[v.primaryTableId];return Array.isArray(Z)?Z.some(G=>G.primaryTableId===$&&G.primaryTableId!==G.foreignTableId):!1});return E.concat(h)},[]),"filterRecursiveRelationships"),I=n((a,E="	")=>a.split(`
`).map($=>E+$).join(`
`),"tab"),K=n((a,E)=>Object.keys(a).map(o.toLower).includes(o.toLower(E)),"hasType"),O=n(a=>Object.entries(a).filter(([E,$])=>!o.isNil($)).reduce((E,[$,h])=>({...E,[$]:h}),{}),"clean"),m=n(a=>a.every(E=>o.get(E,"isActivated",!0)),"checkAllKeysActivated"),c=n(a=>a.length?a.every(E=>!o.get(E,"isActivated",!0)):!1,"checkAllKeysDeactivated"),r=n((a,E)=>{let $=a.filter(v=>o.get(v,"isActivated",!0)).map(E),h=a.filter(v=>!o.get(v,"isActivated",!0)).map(E);return{activatedItems:$,deactivatedItems:h}},"divideIntoActivatedAndDeactivated"),u=n((a,{isActivated:E,isPartOfLine:$,inlineComment:h="--"})=>a?E!==!1?a:$?"/* "+a+" */":a.includes(`
`)?`/*
`+a+` */
`:h+" "+a:"","commentIfDeactivated"),s=n((a,E="'",$="'")=>{let h=a[0];return a[a.length-1]===E&&h===$?a:`${E}${a}${$}`},"wrap"),l=n((a,E)=>E.some($=>(a==null?void 0:a.oldField[$])!==(a==null?void 0:a.newField[$])),"checkFieldPropertiesChanged"),i=n(a=>o.map(a,E=>{let $=E.defaultExpression?`DEFAULT ${E.defaultExpression}`:"";return o.trim(`${E.argumentMode} ${E.argumentName||""} ${E.argumentType} ${$}`)}).join(", "),"getFunctionArguments"),S=n((a,E)=>E?`${T(E)}.${T(a)}`:T(a),"getNamePrefixedWithSchemaName"),T=n(a=>/\s|\W/.test(a)||o.includes(Et,o.toUpper(a))?`"${a}"`:a,"wrapInQuotes"),M=n(({name:a})=>T(a),"columnMapToString"),U=n((a,E,$,h=M)=>{var G;let v=r(a,h),Z=(G=v==null?void 0:v.deactivatedItems)!=null&&G.length?u(v.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!E&&$?" ("+v.activatedItems.join(", ")+Z+")":" ("+a.map(h).join(", ")+")"},"getColumnsList"),re=n(a=>a?a.alias?`${T(a.name)} as ${T(a.alias)}`:T(a.name):"","getKeyWithAlias"),ae=n(a=>Array.isArray(a)?a.reduce((E,$)=>{if(!$.tableName)return E.columns.push(re($)),E;let h=`${T($.dbName)}.${T($.tableName)}`;return E.tables.includes(h)||E.tables.push(h),E.columns.push({statement:`${h}.${re($)}`,isActivated:$.isActivated}),E},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData"),j=n((a="")=>a.replace(dt,E=>`\\${E}`),"prepareComment"),y=n(a=>`E'${j(JSON.stringify(a)).slice(1,-1)}'`,"wrapComment"),A=n(a=>{var v;let E={...a,...o.omit(a==null?void 0:a.role,"properties")||{}},$=f(E),h=(v=E.compMod)==null?void 0:v.keyspaceName;return S($,h)},"getFullTableName");return{getDbName:C,getDbData:R,getEntityName:f,getViewName:p,getViewOn:b,rejectRecursiveRelationships:L,filterRecursiveRelationships:F,tab:I,hasType:K,clean:O,checkAllKeysActivated:m,checkAllKeysDeactivated:c,divideIntoActivatedAndDeactivated:r,commentIfDeactivated:u,wrap:s,checkFieldPropertiesChanged:l,getFullTableName:A,getFullColumnName:n((a,E)=>`${A(a)}.${T(E)}`,"getFullColumnName"),getFullViewName:n(a=>{var v;let E={...a,...o.omit(a==null?void 0:a.role,"properties")||{}},$=p(E),h=(v=E.compMod)==null?void 0:v.keyspaceName;return S($,h)},"getFullViewName"),getFunctionArguments:i,getNamePrefixedWithSchemaName:S,wrapInQuotes:T,getColumnsList:U,getViewData:ae,wrapComment:y,getUdtName:n(a=>a.code||a.name,"getUdtName"),getSchemaOfAlterCollection:n(a=>({...a,...o.omit(a==null?void 0:a.role,"properties")||{}}),"getSchemaOfAlterCollection"),getFullCollectionName:n(a=>{var h;let E=f(a),$=(h=a.compMod)==null?void 0:h.keyspaceName;return S(E,$)},"getFullCollectionName")}}});var Pe=D((Lt,he)=>{"use strict";var Le=n((o="")=>new RegExp("\\$\\{(.*?)\\}",o),"template"),yt=n(o=>o.match(Le("gi"))||[],"getAllTemplates"),Nt=n(o=>(o.match(Le("i"))||[])[1],"parseTemplate"),At=n((o,C)=>yt(o).reduce((f,p)=>{let R=Nt(p);return f.replace(p,()=>C[R]||C[R]===0?C[R]:"")},o),"assignTemplates");he.exports=At});var Fe=D((Pt,Ue)=>{"use strict";Ue.exports=({_:o,commentIfDeactivated:C,checkAllKeysDeactivated:f,assignTemplates:p,wrapInQuotes:R,getColumnsList:b})=>({generateConstraintsString:n((c,r)=>{var i,S;let u=C(((c==null?void 0:c.deactivatedItems)||[]).join(`,
	`),{isActivated:!r,isPartOfLine:!0}),s=(i=c==null?void 0:c.activatedItems)!=null&&i.length?`,
	`+c.activatedItems.join(`,
	`):"",l=(S=c==null?void 0:c.deactivatedItems)!=null&&S.length?`
	`+u:"";return s+l},"generateConstraintsString"),foreignKeysToString:n(c=>{if(Array.isArray(c)){let r=c.filter(l=>o.get(l,"isActivated",!0)).map(l=>R(o.trim(l.name))),u=c.filter(l=>!o.get(l,"isActivated",!0)).map(l=>R(o.trim(l.name))),s=u.length?C(u,{isActivated:!1,isPartOfLine:!0}):"";return r.join(", ")+s}return c},"foreignKeysToString"),foreignActiveKeysToString:n(c=>c.map(r=>o.trim(r.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:n((c,r)=>u=>{let s=R(o.trim(u.name)),l=f(u.columns||[]),i=o.isEmpty(u.columns)?"":b(u.columns,l,r),S=u.include.length?` INCLUDE${b(u.include,l,r)}`:"",T=u.storageParameters?` WITH (${u.storageParameters})`:"",M=u.tablespace?` USING INDEX TABLESPACE ${R(u.tablespace)}`:"";return{statement:p(c.createKeyConstraint,{constraintName:u.name?`CONSTRAINT ${s} `:"",keyType:u.keyType,columns:i,includeNonKey:S,storageParameters:T,tablespace:M}),isActivated:!l}},"createKeyConstraint"),getConstraintsWarnings:n((c=[])=>o.isEmpty(c)?"":`
	`+c.map(r=>{let u=r.name?` [constraint name: ${r.name}]`:"";return`-- ${r.errorMessage}${u}`}).join(`
	`),"getConstraintsWarnings"),additionalPropertiesForForeignKey:n(c=>{let r=o.get(c,"relationshipOnDelete",""),u=o.get(c,"relationshipOnUpdate",""),s=o.get(c,"relationshipMatch",""),l=o.get(c,"deferrable",""),i=o.get(c,"deferrableConstraintCheckTime","");return{foreignOnDelete:r,foreignOnUpdate:u,foreignMatch:s,deferrable:l,deferrableConstraintCheckTime:i}},"additionalPropertiesForForeignKey")})});var Me=D((Ft,Ke)=>{"use strict";Ke.exports=(o,C)=>{let f=n((s,l)=>Object.entries(s.properties).map(l),"mapProperties"),p=n(s=>s.compositeUniqueKey?!1:!!s.unique,"isUniqueKey"),R=n(s=>{var l,i;return p(s)&&(((l=s.uniqueKeyOptions)==null?void 0:l.length)===1&&!((i=o.first(s.uniqueKeyOptions))!=null&&i.constraintName)||o.isEmpty(s.uniqueKeyOptions))},"isInlineUnique"),b=n(s=>s.compositeUniqueKey||s.compositePrimaryKey?!1:!!s.primaryKey,"isPrimaryKey"),L=n(s=>{var l;return b(s)&&!((l=o.first(s.primaryKeyOptions))!=null&&l.constraintName)},"isInlinePrimaryKey"),F=n((s,l,i,S)=>C({keyType:"UNIQUE",name:s.constraintName,columns:[{name:l,isActivated:i}],include:m(s.indexInclude||[],S),storageParameters:s.indexStorageParameters,comment:s.indexComment,tablespace:s.indexTablespace}),"hydrateUniqueOptions"),I=n((s,l,i,S)=>C({keyType:"PRIMARY KEY",name:s.constraintName,columns:[{name:l,isActivated:i}],include:m(s.indexInclude||[],S),storageParameters:s.indexStorageParameters,comment:s.indexComment,tablespace:s.indexTablespace}),"hydratePrimaryKeyOptions"),K=n((s,l)=>Object.keys(l).find(i=>l[i].GUID===s),"findName"),O=n((s,l)=>o.get(Object.values(l).find(i=>i.GUID===s),"isActivated",!0),"checkIfActivated"),m=n((s,l)=>o.map(s,i=>({name:K(i.keyId,l.properties),isActivated:O(i.keyId,l.properties)})),"getKeys"),c=n(s=>Array.isArray(s.primaryKey)?s.primaryKey.map(l=>o.isEmpty(l.compositePrimaryKey)?{name:l.constraintName,errorMessage:"A primary key constraint cannot be created without any primary key selected"}:{...I(l,null,null,s),columns:m(l.compositePrimaryKey,s)}):[],"getCompositePrimaryKeys"),r=n(s=>Array.isArray(s.uniqueKey)?s.uniqueKey.map(l=>o.isEmpty(l.compositeUniqueKey)?{name:l.constraintName,errorMessage:"A unique key constraint cannot be created without any unique key selected"}:{...F(l,null,null,s),columns:m(l.compositeUniqueKey,s)}):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:n(s=>{if(!s.properties)return[];let l=f(s,([S,T])=>{if(!(!b(T)||L(T)))return I(o.first(T.primaryKeyOptions),S,T.isActivated,s)}).filter(Boolean),i=o.flatten(f(s,([S,T])=>!p(T)||R(T)?[]:(T.uniqueKeyOptions||[]).map(M=>F(M,S,T.isActivated,s)))).filter(Boolean);return[...l,...c(s),...i,...r(s)]},"getTableKeyConstraints"),isInlineUnique:R,isInlinePrimaryKey:L,getKeys:m,hydratePrimaryKeyOptions:I,hydrateUniqueOptions:F}}});var Ye=D((Mt,ve)=>{"use strict";ve.exports=({_:o,templates:C,assignTemplates:f,getFunctionArguments:p,getNamePrefixedWithSchemaName:R,wrapComment:b})=>{let L=n((T,M)=>o.map(M,U=>{let re=U.functionOrReplace?" OR REPLACE":"",ae=f(C.createFunction,{name:R(U.name,T),orReplace:re,parameters:p(U.functionArguments),returnType:U.functionReturnsSetOf?`SETOF ${U.functionReturnType}`:U.functionReturnType,language:U.functionLanguage,properties:F(U),definition:U.functionBody}),j=U.functionDescription?f(C.comment,{object:"FUNCTION",objectName:R(U.name,T),comment:b(U.functionDescription)}):"";return[ae,j].filter(Boolean).join(`
`)}).join(`
`),"getFunctionsScript"),F=n(T=>{let M=n(U=>U?`	${U}
`:"","wrap");return[{key:"functionWindow",getValue:I},{key:"functionVolatility",getValue:K},{key:"functionLeakProof",getValue:O},{key:"functionNullArgs",getValue:m},{key:"functionSqlSecurity",getValue:c},{key:"functionParallel",getValue:r},{key:"functionExecutionCost",getValue:u},{key:"functionExecutionRows",getValue:s},{key:"functionSupportFunction",getValue:l},{key:"functionConfigurationParameters",getValue:i}].map(U=>M(U.getValue(T[U.key],T))).filter(Boolean).join("")},"getProperties"),I=n((T,M)=>M.language!=="c"||!T?"":"WINDOW","getWindow"),K=n(T=>T,"getVolatility"),O=n(T=>T?"LEAKPROOF":"NOT LEAKPROOF","getLeakProof"),m=n(T=>T,"getNullArgs"),c=n(T=>{if(T)return`SECURITY ${T}`},"getSqlSecurity"),r=n(T=>{if(T)return`PARALLEL ${T}`},"getParallel"),u=n(T=>{if(T)return`COST ${T}`},"getExecutionCost"),s=n((T,M)=>!T||!M.functionReturnsSetOf&&!S(M)?"":`ROWS ${T}`,"getExecutionRows"),l=n(T=>{if(T)return`SUPPORT ${T}`},"getSupportFunction"),i=n(T=>{if(T)return`SET ${T}`},"getConfigurationParameters"),S=n(T=>(T.functionReturnType||"").trim().toUpperCase().startsWith("TABLE"),"isFunctionReturnsTable");return{getFunctionsScript:L}}});var _e=D((Yt,Ve)=>{"use strict";Ve.exports=({_:o,templates:C,assignTemplates:f,getFunctionArguments:p,getNamePrefixedWithSchemaName:R})=>({getProceduresScript:n((L,F)=>o.map(F,I=>{let K=I.orReplace?" OR REPLACE":"";return f(C.createProcedure,{name:R(I.name,L),orReplace:K,parameters:p(I.inputArgs),language:I.language,body:I.body})}).join(`
`),"getProceduresScript")})});var ke=D((_t,xe)=>{"use strict";xe.exports=({_:o,getColumnsList:C,checkAllKeysDeactivated:f})=>{let p=n((m,c)=>m?" TEMPORARY":c?" UNLOGGED":"","getTableTemporaryValue"),R=n(m=>{let c=n(u=>u?`${u}
`:"","wrap"),r=[{key:"partitionBounds",getValue:I("")},{key:"partitioning",getValue:b},{key:"usingMethod",getValue:I("USING")},{key:"storage_parameter",getValue:O},{key:"on_commit",getValue:F},{key:"table_tablespace_name",getValue:I("TABLESPACE")},{key:"selectStatement",getValue:I("AS")}].map(u=>c(u.getValue(m[u.key],m))).filter(Boolean).join("");return o.trim(r)?` ${o.trim(r)}`:""},"getTableOptions"),b=n((m,{isActivated:c})=>{if(m&&m.partitionMethod){let r=m.partitionBy==="keys"?L(m,c):` (${m.partitioning_expression})`;return`PARTITION BY ${m.partitionMethod}${r}`}},"getPartitioning"),L=n((m,c)=>{let r=f(m.compositePartitionKey);return C(m.compositePartitionKey,r,c)},"getPartitionKeys"),F=n((m,c)=>{if(m&&c.temporary)return`ON COMMIT ${m}`},"getOnCommit"),I=n(m=>c=>{if(c)return`${m} ${c}`},"getBasicValue"),K=["toast_autovacuum_enabled","toast_vacuum_index_cleanup","toast_vacuum_truncate","toast_autovacuum_vacuum_threshold","toast_autovacuum_vacuum_scale_factor","toast_autovacuum_vacuum_insert_threshold","toast_autovacuum_vacuum_insert_scale_factor","toast_autovacuum_vacuum_cost_delay","toast_autovacuum_vacuum_cost_limit","toast_autovacuum_freeze_min_age","toast_autovacuum_freeze_max_age","toast_autovacuum_freeze_table_age","toast_autovacuum_multixact_freeze_min_age","toast_autovacuum_multixact_freeze_max_age","toast_autovacuum_multixact_freeze_table_age","toast_log_autovacuum_min_duration"],O=n(m=>{if(o.isEmpty(m))return"";let c=["autovacuum","toast","id"];return o.chain(m).toPairs().flatMap(([r,u])=>r==="autovacuum"||r==="toast"?o.toPairs(u):[[r,u]]).reject(([r])=>o.includes(c,r)).map(([r,u])=>{if(!(!u&&u!==0))return o.includes(K,r)?`toast.${r.slice(6)}=${u}`:`${r}=${u}`}).compact().join(`,
	`).trim().thru(r=>{if(r)return`WITH (
	${r}
)`}).value()},"getStorageParameters");return{getTableTemporaryValue:p,getTableOptions:R}}});var De=D((kt,Be)=>{"use strict";Be.exports=({_:o,commentIfDeactivated:C,assignTemplates:f,templates:p,getNamePrefixedWithSchemaName:R,wrapComment:b})=>{let L=["composite","enum","range_udt","domain"],F=n((r,u)=>{let s=R(r.name,r.schemaName),l=f(p.comment,{object:"TYPE",objectName:s,comment:b(r.comment)});switch(r.type){case"composite":return f(p.createCompositeType,{name:s,columnDefinitions:o.join(u,`,
	`),comment:r.comment?l:""});case"enum":return f(p.createEnumType,{name:s,values:o.map(r.enum,i=>`'${i}'`).join(", "),comment:r.comment?l:""});case"range_udt":return f(p.createRangeType,{name:s,subtype:r.rangeSubtype,options:K(r),comment:r.comment?l:""});case"domain":{let i=f(p.comment,{object:"DOMAIN",objectName:s,comment:b(r.comment)});return f(p.createDomainType,{name:s,underlyingType:r.underlyingType,notNull:r.nullable?"":" NOT NULL",collate:r.collation?`
	COLLATE ${r.collation}`:"",default:r.default?`
	DEFAULT ${r.default}`:"",constraints:O(r),comment:r.comment?i:""})}default:return""}},"getPlainUdt"),I=n(r=>L.includes(r.type),"isNotPlainType"),K=n(r=>{let u=n(l=>l?`	${l}`:"","wrap"),s=[{key:"operatorClass",getValue:m("SUBTYPE_OPCLASS")},{key:"collation",getValue:m("COLLATION")},{key:"canonicalFunction",getValue:m("CANONICAL")},{key:"subtypeDiffFunction",getValue:m("SUBTYPE_DIFF")},{key:"multiRangeType",getValue:m("MULTIRANGE_TYPE_NAME")}].map(l=>u(l.getValue(r[l.key]))).filter(Boolean).join(`,
`);return o.trim(s)?`,
	`+o.trim(s):""},"getRangeOptions"),O=n(r=>o.map(r.checkConstraints,u=>u.name?`
	CONSTRAINT ${u.name} CHECK (${u.expression})`:`
	CHECK (${u.expression})`).join(""),"getDomainConstraints"),m=n(r=>u=>{if(u)return`${r}=${u}`},"getBasicValue");return{getUserDefinedType:n((r,u)=>C(F(r,u),{isActivated:r.isActivated}),"getUserDefinedType"),isNotPlainType:I}}});var qe=D((Dt,He)=>{"use strict";He.exports=({_:o,wrapInQuotes:C,checkAllKeysDeactivated:f,getColumnsList:p})=>{let R=n(({name:O,sortOrder:m,nullsOrder:c,collation:r,opclass:u})=>{let s=m?` ${m}`:"",l=c?` ${c}`:"",i=o.includes(r,'"')?r:`"${r}"`,S=r?` COLLATE ${i}`:"",T=u?` ${u}`:"";return`${C(O)}${S}${T}${s}${l}`},"mapIndexKey"),b=n((O=[],m)=>{let c=f(O);return p(O,c,m,R)},"getIndexKeys"),L=n((O,m)=>{var S;let c=p(O.include||[],f(O.include||[]),m),r=(S=O.include)!=null&&S.length?` INCLUDE ${o.trim(c)}`:"",u=I(O),s=u?` WITH (
	${u})`:"",l=O.index_tablespace_name?` TABLESPACE ${O.index_tablespace_name}`:"",i=O.where?` WHERE ${O.where}`:"";return o.compact([" ",r,s,l,i]).join(`
`)},"getIndexOptions"),F={btree:{index_fillfactor:"fillfactor",deduplicate_items:"deduplicate_items"},hash:{index_fillfactor:"fillfactor"},gin:{fastupdate:"fastupdate",gin_pending_list_limit:"gin_pending_list_limit"},brin:{pages_per_range:"pages_per_range",autosummarize:"autosummarize"}},I=n(O=>{let m=F[O.index_method];return o.chain(m).toPairs().map(([c,r])=>{let u=O.index_storage_parameter[c];if(!(o.isNil(u)||u===""))return`${r}=${K(u)}`}).compact().join(`,
	`).value()},"getWithOptions"),K=n(O=>o.isBoolean(O)?O?"ON":"OFF":O,"getValue");return{getIndexKeys:b,getIndexOptions:L}}});var We=D((qt,Ge)=>{"use strict";Ge.exports=({_:o,wrap:C,assignTemplates:f,templates:p,commentIfDeactivated:R,wrapComment:b,wrapInQuotes:L})=>{let F=n((y,A)=>`${y}(${A})`,"addLength"),I=n((y,A,V)=>o.isNumber(V)?`${y}(${A},${V})`:`${y}(${A})`,"addScalePrecision"),K=n((y,A)=>o.isNumber(A)?`${y}(${A})`:y,"addPrecision"),O=n((y,A)=>A?`${y} ${A}`:y,"addWithTimezone"),m=n(({type:y,typeModifier:A,srid:V})=>{let q=V?`, ${V}`:"";return A&&A!==""?`${y}(${A}${q})`:y},"addTypeModifier"),c=n((y,A)=>{let V=(A==null?void 0:A.map(q=>`[${(q==null?void 0:q.array_size_limit)??""}]`).join("").trim())||"";return`${y}${V}`},"addArrayDecorator"),r=n(y=>["char","varchar","bit","varbit"].includes(y),"canHaveLength"),u=n(y=>y==="numeric","canHavePrecision"),s=n(y=>["time","timestamp"].includes(y),"canHaveTimePrecision"),l=n(y=>y==="numeric","canHaveScale"),i=n(y=>["geography","geometry"].includes(y),"canHaveTypeModifier"),S=n((y,A)=>r(y)&&o.isNumber(A.length)?F(y,A.length):u(y)&&l(y)&&o.isNumber(A.precision)?I(y,A.precision,A.scale):u(y)&&o.isNumber(A.precision)?K(y,A.precision):i(y)?m({type:y,typeModifier:A.typeModifier,srid:A.srid}):s(y)&&(o.isNumber(A.timePrecision)||A.timezone)?O(K(y,A.timePrecision),A.timezone):c(y,A.array_type),"decorateType"),T=n(y=>["char","varchar","text","bit","varbit"].includes(y),"isString"),M=n(y=>["date","time","timestamp","interval"].includes(y),"isDateTime"),U=n((y,A,V)=>{let q=["current_timestamp","null"];return(T(y)||M(y))&&!q.includes(o.toLower(A))&&!V?b(A):A},"decorateDefault"),re=n((y,A)=>o.chain(A).filter("comment").map(V=>{let q=f(p.comment,{object:"COLUMN",objectName:`${y}.${L(V.name)}`,comment:b(V.comment)});return R(q,V)}).join(`
`).value(),"getColumnComments"),ae={"v2.x":{int4multirange:"int4range",int8multirange:"int8range",nummultirange:"numrange",datemultirange:"daterange",tsmultirange:"tsrange",tstzmultirange:"tstzrange"}};return{decorateType:S,decorateDefault:U,getColumnComments:re,replaceTypeByVersion:n((y,A)=>{let V=ae[A];return o.get(V,y)||y},"replaceTypeByVersion")}}});var je=D((Wt,we)=>{"use strict";we.exports=({_:o,assignTemplates:C,templates:f,getNamePrefixedWithSchemaName:p,wrap:R,commentIfDeactivated:b})=>{let L=n(({dbVersion:m,triggers:c,tableName:r})=>o.map(c,F(m,r)).join(`
`).trim(),"getTriggersScript"),F=n((m,c)=>r=>{let u=I(r),s=K(r);return C(f.createTrigger,{orReplace:r.triggerOrReplace?" OR REPLACE":"",constraint:r.triggerConstraint?" CONSTRAINT":"",actionTiming:r.triggerType??"",functionKey:m==="v2.x"?"PROCEDURE":"FUNCTION",functionName:r.triggerFunction,name:r.name,tableName:c,events:u,options:s})},"getTriggerScript"),I=n(m=>{var c;return(c=m.triggerEvents)==null?void 0:c.map(r=>{if(r.triggerEvent!=="UPDATE"||o.isEmpty(m.triggerUpdateColumns))return r.triggerEvent;let u=o.chain(m.triggerUpdateColumns).filter("isActivated").map(({name:i})=>i).join(", ").thru(i=>i&&`OF ${i}`).value(),s=o.chain(m.triggerUpdateColumns).reject("isActivated").map(({name:i})=>i).join(", ").thru(i=>!u&&i?`OF ${i}`:i).value(),l=s&&b(s,{isActivated:!1,isPartOfLine:!0});return`UPDATE ${u} ${l}`}).join(" OR ")},"getTriggerEvents"),K=n(m=>{let c="";if(m.triggerConstraint&&(m.triggerReferencedTable&&(c+=R(`FROM ${m.triggerReferencedTable}`,"	",`
`)),c+=R(m.triggerDeferrable?"DEFERRABLE":"NOT DEFERRABLE","	",`
`),m.triggerDeferrable&&m.triggerTimeConstraintCheck&&(c+=R(m.triggerTimeConstraintCheck,"	",`
`))),m.triggerReferencing){let r="REFERENCING";m.triggerBeforeImageTransitionRelation&&(r+=` OLD TABLE ${m.triggerBeforeImageTransitionRelation}`),m.triggerAfterImageTransitionRelation&&(r+=` NEW TABLE ${m.triggerAfterImageTransitionRelation}`),c+=R(r,"	",`
`)}return c+=R(m.triggerConstraint||m.triggerType==="INSTEAD OF"?"FOR EACH ROW":m.triggerEachRowStatement||"FOR EACH STATEMENT","	",`
`),m.triggerCondition&&(c+=R(`WHEN ${m.triggerCondition}`,"	",`
`)),c},"getTriggerOptions");return{getTriggersScript:L,hydrateTriggers:n((m,c={})=>{var r;return(((r=o.find(m,"triggers"))==null?void 0:r.triggers)||[]).map(u=>{let s=c[u.triggerReferencedTable];if(!s)return{...u,triggerReferencedTable:""};let l=p(s.code||s.collectionName,s.bucketName);return{...u,triggerReferencedTable:l}})},"hydrateTriggers")}}});var ze=D((jt,Xe)=>{"use strict";Xe.exports=()=>({getLocaleProperties:n(C=>{let f=["v13.x","v14.x"].includes(C.dbVersion);return f&&C.locale?{locale:C.locale}:!f&&C.locale?{collate:C.locale,characterClassification:C.locale}:{collate:C.collate,characterClassification:C.characterClassification}},"getLocaleProperties")})});var Je=D((zt,Qe)=>{"use strict";var Ct=Ae(),Ze=$e(),N=Oe();Qe.exports=(o,C,f)=>{let p=f.require("lodash"),{tab:R,commentIfDeactivated:b,checkAllKeysDeactivated:L,divideIntoActivatedAndDeactivated:F,hasType:I,wrap:K,clean:O,getFunctionArguments:m,wrapInQuotes:c,getNamePrefixedWithSchemaName:r,getColumnsList:u,getViewData:s,wrapComment:l}=Se()(p),i=Pe(),{generateConstraintsString:S,foreignKeysToString:T,foreignActiveKeysToString:M,createKeyConstraint:U,getConstraintsWarnings:re,additionalPropertiesForForeignKey:ae}=Fe()({_:p,commentIfDeactivated:b,checkAllKeysDeactivated:L,assignTemplates:i,getColumnsList:u,wrapInQuotes:c}),j=Me()(p,O),{getFunctionsScript:y}=Ye()({_:p,templates:N,assignTemplates:i,getFunctionArguments:m,getNamePrefixedWithSchemaName:r,wrapComment:l}),{getProceduresScript:A}=_e()({_:p,templates:N,assignTemplates:i,getFunctionArguments:m,getNamePrefixedWithSchemaName:r}),{getTableTemporaryValue:V,getTableOptions:q}=ke()({_:p,checkAllKeysDeactivated:L,getColumnsList:u}),{getUserDefinedType:le,isNotPlainType:pe}=De()({_:p,commentIfDeactivated:b,assignTemplates:i,templates:N,getNamePrefixedWithSchemaName:r,wrapComment:l}),{getIndexKeys:Te,getIndexOptions:a}=qe()({_:p,wrapInQuotes:c,checkAllKeysDeactivated:L,getColumnsList:u}),{decorateType:E,decorateDefault:$,getColumnComments:h,replaceTypeByVersion:v}=We()({_:p,wrap:K,assignTemplates:i,templates:N,commentIfDeactivated:b,wrapInQuotes:c,wrapComment:l}),{getTriggersScript:Z,hydrateTriggers:G}=je()({_:p,wrap:K,assignTemplates:i,templates:N,getNamePrefixedWithSchemaName:r,commentIfDeactivated:b}),{getLocaleProperties:et}=ze()();return{createDatabase(e){if(!e.databaseName)return"";let{locale:t,collate:g,characterClassification:d}=et(e);return i(N.createDatabase,{name:c(e.databaseName),template:e.template?`
	TEMPLATE ${e.template}`:"",encoding:e.encoding?`
	ENCODING ${e.encoding}`:"",locale:t?`
	LOCALE '${e.locale}'`:"",collate:g?`
	LC_COLLATE '${e.collate}'`:"",characterClassification:d?`
	LC_CTYPE '${d}'`:"",tablespace:e.tablespace?`
	TABLESPACE '${e.tablespace}'`:""})},createSchema({schemaName:e,ifNotExist:t,comments:g,udfs:d,procedures:P}){let x=i(N.comment,{object:"SCHEMA",objectName:c(e),comment:l(g)}),Y=i(N.createSchema,{name:c(e),ifNotExist:t?" IF NOT EXISTS":"",comment:g?x:""}),_=y(e,d),H=A(e,P);return p.chain([Y,_,H]).compact().map(p.trim).join(`

`).trim().value()},createTable({name:e,columns:t,checkConstraints:g,foreignKeyConstraints:d,schemaData:P,columnDefinitions:x,keyConstraints:Y,inherits:_,description:H,ifNotExist:w,usingMethod:Q,on_commit:X,partitioning:W,storage_parameter:ie,table_tablespace_name:te,temporary:J,unlogged:ne,selectStatement:ee,triggers:z,partitionOf:k,partitionBounds:B},oe){let ue=w?" IF NOT EXISTS":"",me=r(e,P.schemaName),tt=i(N.comment,{object:"TABLE",objectName:me,comment:l(H)}),nt=F(Y.filter(({errorMessage:se})=>!se).map(U(N,oe)),se=>se.statement),rt=re(Y.filter(({errorMessage:se})=>se)),ce=`${S(nt,oe)}${rt}`,ge=k?ce==null?void 0:ce.slice(1):ce,at=F(d,se=>se.statement),Ee=S(at,oe),ot=`
`+h(me,x),it=k?N.createTablePartitionOf:N.createTable,st=k&&!ce?`
	`:`,
	`,de=p.isEmpty(g)?"":K(p.join(g,`,
	`),st,""),ye=k&&!ge&&!de&&!Ee,ct=ye?"":"(",mt=ye?"":")",ut=i(it,{temporary:V(J,ne),ifNotExist:ue,name:me,columnDefinitions:k?"":"	"+p.join(t,`,
	`),keyConstraints:ge,checkConstraints:de,foreignKeyConstraints:Ee,options:q({inherits:_,partitioning:W,usingMethod:Q,on_commit:X,storage_parameter:ie,table_tablespace_name:te,selectStatement:ee,partitionBounds:B}),comment:H?tt:"",partitionOf:k?` PARTITION OF ${k} `:"",columnDescriptions:ot,openParenthesis:ct,closeParenthesis:mt}),lt=Z({dbVersion:P.dbVersion,tableName:me,triggers:z});return b([ut,lt].map(p.trim).join(`

`).trim()+`
`,{isActivated:oe})},convertColumnDefinition(e){let t=v(e.type,e.dbVersion),g=e.nullable?"":" NOT NULL",d=e.primaryKey?" "+U(N,!0)(e.primaryKeyOptions).statement:"",P=e.unique?" "+U(N,!0)(e.uniqueKeyOptions).statement:"",x=e.collationRule?` COLLATE "${e.collationRule}"`:"",Y=Array.isArray(e.array_type)&&e.array_type.length>0,_=p.isUndefined(e.default)?"":" DEFAULT "+$(t,e.default,Y);return b(i(N.columnDefinition,{name:c(e.name),type:E(t,e),notNull:g,primaryKey:d,uniqueKey:P,collation:x,defaultValue:_}),{isActivated:e.isActivated})},createIndex(e,t,g,d=!0){let P=c(t.indxName),x=t.unique&&t.index_method==="btree"?" UNIQUE":"",Y=t.concurrently?" CONCURRENTLY":"",_=t.ifNotExist?" IF NOT EXISTS":"",H=t.only?" ONLY":"",w=t.index_method?` USING ${p.toUpper(t.index_method)}`:"",Q=Te(t.index_method==="btree"?t.columns:p.map(t.columns,W=>p.omit(W,"sortOrder","nullsOrder")),d),X=a(t,d);return b(i(N.index,{unique:x,concurrently:Y,ifNotExist:_,name:P,only:H,using:w,keys:Q,options:X,tableName:r(e,t.schemaName)}),{isActivated:t.isActivated})},createCheckConstraint(e){return i(N.checkConstraint,{name:e.name?`CONSTRAINT ${c(e.name)}`:"",expression:p.trim(e.expression).replace(/^\(([\s\S]*)\)$/,"$1")})},createForeignKeyConstraint({name:e,foreignKey:t,primaryTable:g,primaryKey:d,primaryTableActivated:P,foreignTableActivated:x,foreignSchemaName:Y,primarySchemaName:_,customProperties:H,isActivated:w},Q,X){let W=L(d),ie=L(t),te=!W&&!ie&&P&&x,{foreignOnDelete:J,foreignOnUpdate:ne,foreignMatch:ee,deferrable:z,deferrableConstraintCheckTime:k}=ae(H),B=i(N.createForeignKeyConstraint,{primaryTable:r(g,_||X.schemaName),name:e?`CONSTRAINT ${c(e)}`:"",foreignKey:te?T(t):M(t),primaryKey:te?T(d):M(d),onDelete:J?` ON DELETE ${J}`:"",onUpdate:ne?` ON UPDATE ${ne}`:"",match:ee?` MATCH ${ee}`:"",deferrable:z?` ${z}`:"",deferrableConstraintCheckTime:z==="DEFERRABLE"&&k?` ${k}`:""});return{statement:p.trim(B),isActivated:te&&w}},createForeignKey({name:e,foreignTable:t,foreignKey:g,primaryTable:d,primaryKey:P,primaryTableActivated:x,foreignTableActivated:Y,foreignSchemaName:_,primarySchemaName:H,customProperties:w,isActivated:Q},X,W){let ie=L(P),te=L(g),J=!ie&&!te&&x&&Y,{foreignOnDelete:ne,foreignOnUpdate:ee,foreignMatch:z,deferrable:k,deferrableConstraintCheckTime:B}=ae(w),oe=i(N.createForeignKey,{primaryTable:r(d,H||W.schemaName),foreignTable:r(t,_||W.schemaName),name:e?c(e):"",foreignKey:J?T(g):M(g),primaryKey:J?T(P):M(P),onDelete:ne?` ON DELETE ${ne}`:"",onUpdate:ee?` ON UPDATE ${ee}`:"",match:z?` MATCH ${z}`:"",deferrable:k?` ${k}`:"",deferrableConstraintCheckTime:k==="DEFERRABLE"&&B?` ${B}`:""});return{statement:p.trim(oe),isActivated:J&&Q}},createView(e,t,g){var ee,z,k;let d=r(e.name,e.schemaName),P=i(N.comment,{object:"VIEW",objectName:d,comment:l(e.comment)}),Y=L(e.keys||[])||!g,{columns:_,tables:H}=s(e.keys),w=_.map(B=>B.statement).join(`,
		`);if(!Y){let B=F(_,ue=>ue.statement),oe=B.deactivatedItems.length?b(B.deactivatedItems.join(`,
		`),{isActivated:!1,isPartOfLine:!0}):"";w=B.activatedItems.join(`,
		`)+oe}let Q=p.trim(e.selectStatement)?p.trim(R(e.selectStatement)):i(N.viewSelectStatement,{tableName:H.join(", "),keys:w}),X=(ee=e.viewOptions)!=null&&ee.check_option?`check_option=${(z=e.viewOptions)==null?void 0:z.check_option}`:"",W=(k=e.viewOptions)!=null&&k.security_barrier?"security_barrier":"",ie=X||W?`
	WITH (${p.compact([X,W]).join(",")})`:"",te=n(B=>B.withCheckOption&&B.checkTestingScope?`
	WITH ${B.checkTestingScope} CHECK OPTION`:B.withCheckOption?`
	WITH CHECK OPTION`:"","getCheckOption"),J=b(i(N.createView,{name:d,orReplace:e.orReplace?" OR REPLACE":"",temporary:e.temporary?" TEMPORARY":"",checkOption:te(e),comment:e.comment?P:"",withOptions:ie,selectStatement:Q}),{isActivated:!Y}),ne=Z({dbVersion:e.dbVersion,tableName:d,triggers:e.triggers});return[J,ne].map(p.trim).join(`

`).trim()+`
`},createViewIndex(){return""},createUdt(e){let t=p.map(e.properties,this.convertColumnDefinition);return le(e,t)},getDefaultType(e){return Ct[e]},dropView(e){let t={viewName:e};return i(N.dropView,t)},getTypesDescriptors(){return Ze},hasType(e){return I(Ze,e)},hydrateDatabase({modelData:e}){return e=p.get(e,"0",{}),{databaseName:e.database_name,tablespace:e.tablespace_name,encoding:e.encoding,template:e.template,collate:e.LC_COLLATE,characterClassification:e.LC_CTYPE,dbVersion:e.dbVersion,locale:e.locale}},hydrateColumn({columnDefinition:e,jsonSchema:t,schemaData:g,definitionJsonSchema:d={},parentJsonSchema:P}){let x=p.includes(["char","varchar","text"],e.type)?t.collationRule:"",Y=["time","timestamp"],_=p.includes(Y,e.type)?t.timePrecision:"",H=p.includes(Y,e.type)?t.timezone:"",w=e.type==="interval"?t.intervalOptions:"",Q=g.dbVersion,X=p.omit(j.hydratePrimaryKeyOptions(p.first(t.primaryKeyOptions)||{},e.name,e.isActivated,P),"columns"),W=p.omit(j.hydrateUniqueOptions(p.first(t.uniqueKeyOptions)||{},e.name,e.isActivated,P),"columns");return{name:e.name,type:e.type,primaryKey:j.isInlinePrimaryKey(t),primaryKeyOptions:X,unique:j.isInlineUnique(t),uniqueKeyOptions:W,nullable:e.nullable,default:e.default,comment:t.refDescription||t.description||d.description,isActivated:e.isActivated,scale:e.scale,precision:e.precision,length:e.length,enum:t.enum,array_type:t.array_type,unit:t.unit,rangeSubtype:t.rangeSubtype,operatorClass:t.operatorClass,collation:t.collation,canonicalFunction:t.canonicalFunction,subtypeDiffFunction:t.subtypeDiffFunction,multiRangeType:t.multiRangeType,schemaName:g.schemaName,underlyingType:t.underlyingType,checkConstraints:t.checkConstraints,typeModifier:t.typeModifier,srid:t.srid,collationRule:x,timePrecision:_,timezone:H,intervalOptions:w,dbVersion:Q}},hydrateJsonSchemaColumn(e,t){return!e.$ref||p.isEmpty(t)||pe(t)?e:(e=p.omit(e,"$ref"),{...t,...e})},hydrateIndex(e,t,g){return{...e,schemaName:g.schemaName}},hydrateViewIndex(e){return{}},hydrateCheckConstraint(e){return{name:e.chkConstrName,expression:e.constrExpression,noInherit:null}},hydrateSchema(e,t){let g=p.get(t,"modelData.0.dbVersion");return{schemaName:e.name,ifNotExist:e.ifNotExist,comments:e.description,udfs:(t==null?void 0:t.udfs)||[],procedures:(t==null?void 0:t.procedures)||[],dbVersion:g}},hydrateTable({tableData:e,entityData:t,jsonSchema:g}){let d=t[0],P=[],x=p.first(d.partitioning)||{},Y=j.getKeys(x.compositePartitionKey,g),_="",H=G(t,e.relatedSchemas);return{...e,triggers:H,partitionOf:_,keyConstraints:j.getTableKeyConstraints(g),inherits:P,selectStatement:p.trim(d.selectStatement),partitioning:p.assign({},x,{compositePartitionKey:Y}),...p.pick(d,"temporary","unlogged","description","ifNotExist","usingMethod","on_commit","storage_parameter","table_tablespace_name","partitionBounds")}},hydrateViewColumn(e){return{name:e.name,tableName:e.entityName,alias:e.alias,isActivated:e.isActivated,dbName:e.dbName}},hydrateView({viewData:e,entityData:t,relatedSchemas:g}){let d=t[0],P=G(t,g);return{name:e.name,keys:e.keys,comment:d.description,orReplace:d.orReplace,temporary:d.temporary,recursive:d.recursive,viewOptions:d.viewOptions,selectStatement:d.selectStatement,withCheckOption:d.withCheckOption,checkTestingScope:d.withCheckOption?d.checkTestingScope:"",schemaName:e.schemaData.schemaName,triggers:P}},commentIfDeactivated(e,t,g){return e},alterColumnType(e,t,g,d){let P=g;return d.length?P+=`(${d.length})`:d.precision&&d.scale?P+=`(${d.precision},${d.scale})`:d.precision&&(P+=`(${d.precision})`),i(N.alterColumnType,{tableName:e,columnName:t,dataType:P})},setNotNullConstraint(e,t){return i(N.addNotNullConstraint,{tableName:e,columnName:t})},dropNotNullConstraint(e,t){return i(N.dropNotNullConstraint,{tableName:e,columnName:t})},renameColumn(e,t,g){return i(N.renameColumn,{tableName:e,oldColumnName:t,newColumnName:g})},addCheckConstraint(e,t,g){let d={tableName:e,constraintName:t,expression:g};return i(N.addCheckConstraint,d)},dropConstraint(e,t){let g={tableName:e,constraintName:t};return i(N.dropConstraint,g)},updateTableComment(e,t){let g={tableName:e,comment:t};return i(N.updateCommentOnTable,g)},dropTableComment(e){let t={tableName:e,comment:"NULL"};return i(N.updateCommentOnTable,t)},updateColumnComment(e,t){let g={columnName:e,comment:t};return i(N.updateCommentOnColumn,g)},dropColumnComment(e){let t={columnName:e,comment:"NULL"};return i(N.updateCommentOnColumn,t)},updateSchemaComment(e,t){let g={schemaName:e,comment:t};return i(N.updateCommentOnSchema,g)},dropSchemaComment(e){let t={schemaName:e,comment:"NULL"};return i(N.updateCommentOnSchema,t)},updateViewComment(e,t){let g={viewName:e,comment:t};return i(N.updateCommentOnView,g)},dropViewComment(e){let t={viewName:e,comment:"NULL"};return i(N.updateCommentOnView,t)},createSchemaOnly(e){let t={schemaName:e};return i(N.createSchemaOnly,t)},dropSchema(e){let t={schemaName:e};return i(N.dropSchema,t)},dropTable(e){let t={tableName:e};return i(N.dropTable,t)},addColumn(e,t){let g={tableName:e,columnDefinition:t};return i(N.addColumn,g)},dropColumn(e,t){let g={tableName:e,columnName:t};return i(N.dropColumn,g)},dropDomain(e){let t={udtName:e};return i(N.dropDomain,t)},dropType(e){let t={udtName:e};return i(N.dropType,t)},alterTypeAddAttribute(e,t){let g={udtName:e,columnDefinition:t};return i(N.alterTypeAddAttribute,g)},alterTypeDropAttribute(e,t){let g={udtName:e,attributeName:t};return i(N.alterTypeDropAttribute,g)},alterTypeRenameAttribute(e,t,g){let d={udtName:e,oldAttributeName:t,newAttributeName:g};return i(N.alterTypeRenameAttribute,d)},alterTypeChangeAttributeType(e,t,g){let d={udtName:e,attributeName:t,newDataType:g};return i(N.alterTypeChangeAttributeType,d)},dropForeignKey(e,t){let g={tableName:e,fkConstraintName:t};return i(N.dropForeignKey,g)},createKeyConstraint(e,t,g){let d=U(N,t)(g);return{statement:i(N.addPkConstraint,{constraintStatement:(d.statement||"").trim(),tableName:e}),isActivated:d.isActivated}},dropPkConstraint(e,t){let g={tableName:e,constraintName:t};return i(N.dropConstraint,g)}}}});module.exports=Je();
