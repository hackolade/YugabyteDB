"use strict";var dt=Object.defineProperty;var n=(o,A)=>dt(o,"name",{value:A,configurable:!0});var _=(o,A)=>()=>(A||o((A={exports:{}}).exports,A),A.exports);var Ae=_((Lt,Ne)=>{"use strict";Ne.exports={number:"numeric",string:"text",date:"date",timestamp:"timestamp",binary:"bytea",boolean:"boolean",document:"jsonb",array:"jsonb",objectId:"uuid",default:"char"}});var $e=_((ht,Ce)=>{"use strict";Ce.exports={char:{size:1},varchar:{mode:"varying"},text:{mode:"text"},bit:{size:1,mode:"bit"},varbit:{size:1,mode:"varying"},tsvector:{mode:"text"},tsquery:{mode:"text"},smallint:{capacity:2},integer:{capacity:4},bigint:{capacity:8},numeric:{capacity:12,mode:"decimal"},real:{capacity:4,mode:"floating"},"double precision":{capacity:8,mode:"floating"},smallserial:{capacity:2},serial:{capacity:4},bigserial:{capacity:8},money:{capacity:8,mode:"decimal"},bytea:{size:4,mode:"binary"},date:{format:"YYYY-MM-DD"},time:{format:"hh:mm:ss.nnnnnn"},timestamp:{format:"YYYY-MM-DD hh:mm:ss"},interval:{format:"PnYnMnDTnHnMnS"},boolean:{mode:"boolean"},int4range:{mode:"range",modeType:"integer",capacity:4},int8range:{mode:"range",modeType:"integer",capacity:8},numrange:{mode:"range",modeType:"decimal",capacity:12},daterange:{mode:"range",modeType:"date",format:"YYYY-MM-DD"},tsrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzrange:{mode:"range",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},int4multirange:{mode:"multirange",modeType:"integer",capacity:4},int8multirange:{mode:"multirange",modeType:"integer",capacity:8},nummultirange:{mode:"multirange",modeType:"decimal",capacity:12},datemultirange:{mode:"multirange",modeType:"date",format:"YYYY-MM-DD"},tsmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss"},tstzmultirange:{mode:"multirange",modeType:"timestamp",format:"YYYY-MM-DD hh:mm:ss.nnnZ"},geometry:{format:"euclidian",mode:"geospatial"},geography:{format:"euclidian",mode:"geospatial"},box2d:{format:"euclidian",mode:"geospatial"},box3d:{format:"euclidian",mode:"geospatial"},geometry_dump:{format:"euclidian",mode:"geospatial"},point:{format:"euclidian",mode:"geospatial"},line:{format:"euclidian",mode:"geospatial"},lseg:{format:"euclidian",mode:"geospatial"},box:{format:"euclidian",mode:"geospatial"},path:{format:"euclidian",mode:"geospatial"},polygon:{format:"euclidian",mode:"geospatial"},circle:{format:"euclidian",mode:"geospatial"},inet:{mode:"ip"},cidr:{mode:"ip"},macaddr:{},macaddr8:{},uuid:{mode:"uuid"},oid:{mode:"uuid"},regclass:{},regcollation:{},regconfig:{},regdictionary:{},regnamespace:{},regoper:{},regoperator:{},regproc:{},regprocedure:{},regrole:{},regtype:{},xml:{mode:"xml"},json:{format:"semi-structured"},jsonb:{format:"semi-structured"},composite:{format:"semi-structured",mode:"object"},enum:{mode:"enum"},range_udt:{mode:"range"},domain:{mode:"domain"}}});var Oe=_((Pt,fe)=>{"use strict";fe.exports={createDatabase:"CREATE DATABASE ${name}${template}${encoding}${locale}${collate}${characterClassification}${tablespace};\n",createSchema:"CREATE SCHEMA${ifNotExist} ${name};\nSET search_path TO ${name};\n\n${comment}\n",comment:"COMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${temporary} TABLE${ifNotExist} ${name} (\n${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n)${options};\n\n${comment}${columnDescriptions}",createTablePartitionOf:"CREATE${temporary} TABLE${ifNotExist} ${name}\n${partitionOf} ${openParenthesis}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n${closeParenthesis}${options};\n\n${comment}${columnDescriptions}",columnDefinition:"${name} ${type}${collation}${primaryKey}${uniqueKey}${defaultValue}${notNull}",checkConstraint:"${name} CHECK (${expression})",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${match}${onDelete}${onUpdate}${deferrable}${deferrableConstraintCheckTime}",createKeyConstraint:"${constraintName}${keyType}${columns}${includeNonKey}${storageParameters}${tablespace}",alterColumnType:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET DATA TYPE ${dataType};",addNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} SET NOT NULL;",dropNotNullConstraint:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN ${columnName} DROP NOT NULL;",renameColumn:"ALTER TABLE IF EXISTS ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",addCheckConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD CONSTRAINT ${constraintName} CHECK (${expression});",dropConstraint:"ALTER TABLE IF EXISTS ${tableName} DROP CONSTRAINT IF EXISTS ${constraintName};",createForeignKey:"ALTER TABLE IF EXISTS ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable}(${primaryKey})${match}${onDelete}${onUpdate}${deferrable}${deferrableConstraintCheckTime};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",addPkConstraint:"ALTER TABLE IF EXISTS ${tableName} ADD ${constraintStatement};",dropTable:"DROP TABLE IF EXISTS ${tableName};",addColumn:"ALTER TABLE IF EXISTS ${tableName} ADD COLUMN IF NOT EXISTS ${columnDefinition};",dropColumn:"ALTER TABLE IF EXISTS ${tableName} DROP COLUMN IF EXISTS ${columnName};",dropDomain:"DROP DOMAIN IF EXISTS ${udtName};",dropType:"DROP TYPE IF EXISTS ${udtName};",alterTypeAddAttribute:"ALTER TYPE ${udtName} ADD ATTRIBUTE ${columnDefinition};",alterTypeDropAttribute:"ALTER TYPE ${udtName} DROP ATTRIBUTE IF EXISTS ${attributeName};",alterTypeRenameAttribute:"ALTER TYPE ${udtName} RENAME ATTRIBUTE ${oldAttributeName} TO ${newAttributeName};",alterTypeChangeAttributeType:"ALTER TYPE ${udtName} ALTER ATTRIBUTE ${attributeName} SET DATA TYPE ${newDataType};",updateCommentOnTable:"COMMENT ON TABLE ${tableName} IS ${comment};",updateCommentOnColumn:"COMMENT ON COLUMN ${columnName} IS ${comment};",updateCommentOnSchema:"COMMENT ON SCHEMA ${schemaName} IS ${comment};",updateCommentOnView:"COMMENT ON VIEW ${viewName} IS ${comment};",createSchemaOnly:"CREATE SCHEMA IF NOT EXISTS ${schemaName};",dropSchema:"DROP SCHEMA IF EXISTS ${schemaName};",index:"CREATE${unique} INDEX${concurrently}${ifNotExist} ${name}\n ON${only} ${tableName}${using}${keys}${options};\n",createView:"CREATE${orReplace}${temporary} VIEW ${name}${withOptions}\nAS ${selectStatement}${checkOption};\n\n${comment}\n",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",dropView:"DROP VIEW IF EXISTS ${viewName};",createFunction:"CREATE${orReplace} FUNCTION ${name}\n	(${parameters})\n	RETURNS ${returnType}\n	LANGUAGE ${language}\n${properties}AS $BODY$\n${definition}\n$BODY$;\n",createProcedure:"CREATE${orReplace} PROCEDURE ${name} (${parameters})\n	LANGUAGE ${language}\nAS $BODY$\n${body}\n$BODY$;\n",createCompositeType:`CREATE TYPE \${name} AS (
	\${columnDefinitions}
);

\${comment}`,createEnumType:"CREATE TYPE ${name} AS ENUM (${values});\n\n${comment}",createRangeType:"CREATE TYPE ${name} AS RANGE (\n	SUBTYPE=${subtype}${options}\n);\n\n${comment}",createDomainType:"CREATE DOMAIN ${name} AS ${underlyingType}${notNull}${collate}${default}${constraints};\n\n${comment}",createTrigger:"CREATE${orReplace}${constraint} TRIGGER ${name} ${actionTiming} ${events}\n	ON ${tableName}\n${options}	EXECUTE ${functionKey} ${functionName};\n"}});var be=_((Ut,Re)=>{"use strict";var Et=n(({index:o,numberOfStatements:A,lastIndexOfActivatedStatement:f,delimiter:l})=>{let O=o===A-1,R=o===f;return O?"":R?" --"+l:l},"getDelimiter"),yt=n(({statements:o=[],delimiter:A=",",indent:f=`
`})=>{let l=o.findLastIndex(R=>!R.startsWith("--")),O=o.length;return o.map((R,I)=>{let F=Et({index:I,numberOfStatements:O,lastIndexOfActivatedStatement:l,delimiter:A});return R+F}).join(f)},"joinActivatedAndDeactivatedStatements");Re.exports={joinActivatedAndDeactivatedStatements:yt}});var Se=_((Kt,Ie)=>{"use strict";var Nt=Object.freeze({ALL:"ALL",ANALYSE:"ANALYSE",ANALYZE:"ANALYZE",AND:"AND",ANY:"ANY",ARRAY:"ARRAY",ASC:"ASC",ASYMMETRIC:"ASYMMETRIC",AUTHORIZATION:"AUTHORIZATION",BINARY:"BINARY",BOTH:"BOTH",CASE:"CASE",CAST:"CAST",CHECK:"CHECK",COLLATE:"COLLATE",COLUMN:"COLUMN",CONCURRENTLY:"CONCURRENTLY",CONSTRAINT:"CONSTRAINT",CREATE:"CREATE",CROSS:"CROSS",CURRENT_CATALOG:"CURRENT_CATALOG",CURRENT_DATE:"CURRENT_DATE",CURRENT_ROLE:"CURRENT_ROLE",CURRENT_SCHEMA:"CURRENT_SCHEMA",CURRENT_TIME:"CURRENT_TIME",CURRENT_TIMESTAMP:"CURRENT_TIMESTAMP",CURRENT_USER:"CURRENT_USER",DEFAULT:"DEFAULT",DEFERRABLE:"DEFERRABLE",DESC:"DESC",DISTINCT:"DISTINCT",DO:"DO",ELSE:"ELSE",END:"END",EXCEPT:"EXCEPT",FALSE:"FALSE",FOR:"FOR",FOREIGN:"FOREIGN",FREEZE:"FREEZE",FROM:"FROM",FULL:"FULL",GRANT:"GRANT",GROUP:"GROUP",HAVING:"HAVING",ILIKE:"ILIKE",IN:"IN",INITIALLY:"INITIALLY",INTERSECT:"INTERSECT",INTO:"INTO",IS:"IS",ISNULL:"ISNULL",JOIN:"JOIN",LATERAL:"LATERAL",LEADING:"LEADING",LEFT:"LEFT",LIKE:"LIKE",LIMIT:"LIMIT",LOCALTIME:"LOCALTIME",LOCALTIMESTAMP:"LOCALTIMESTAMP",NATURAL:"NATURAL",NOT:"NOT",NULL:"NULL",OFFSET:"OFFSET",ON:"ON",ONLY:"ONLY",OR:"OR",ORDER:"ORDER",OUTER:"OUTER",OVERLAPS:"OVERLAPS",PLACING:"PLACING",PRIMARY:"PRIMARY",REFERENCES:"REFERENCES",RETURNING:"RETURNING",RIGHT:"RIGHT",SELECT:"SELECT",SESSION_USER:"SESSION_USER",SIMILAR:"SIMILAR",SOME:"SOME",SYMMETRIC:"SYMMETRIC",TABLE:"TABLE",TABLESAMPLE:"TABLESAMPLE",THEN:"THEN",TO:"TO",TRAILING:"TRAILING",TRUE:"TRUE",UNION:"UNION",UNIQUE:"UNIQUE",USER:"USER",USING:"USING",VARIADIC:"VARIADIC",VERBOSE:"VERBOSE",WHEN:"WHEN",WHERE:"WHERE",WINDOW:"WINDOW",WITH:"WITH"}),At=Object.values(Nt);Ie.exports={ReservedWordsAsArray:At}});var he=_((Mt,Le)=>{"use strict";var{ReservedWordsAsArray:Ct}=Se(),$t=/\t|\n|'|\f|\r/gm;Le.exports=o=>{let A=n(a=>o.get(a,"[0].code")||o.get(a,"[0].name",""),"getDbName"),f=n(a=>a&&(a.code||a.collectionName)||"","getEntityName"),l=n(a=>a&&(a.code||a.name)||"","getViewName"),O=n(a=>Object.assign({},o.get(a,"[0]",{}),{name:A(a)}),"getDbData"),R=n(a=>o.get(a,"[0].viewOn"),"getViewOn"),I=n(a=>Object.keys(a).reduce((d,$)=>{let h=a[$].filter(v=>{let Z=a[v.primaryTableId];return Array.isArray(Z)?!Z.some(W=>W.primaryTableId===$&&W.primaryTableId!==W.foreignTableId):!0});return o.isEmpty(h)?d:Object.assign({},d,{[$]:h})},{}),"rejectRecursiveRelationships"),F=n(a=>Object.keys(a).reduce((d,$)=>{let h=a[$].filter(v=>{let Z=a[v.primaryTableId];return Array.isArray(Z)?Z.some(W=>W.primaryTableId===$&&W.primaryTableId!==W.foreignTableId):!1});return d.concat(h)},[]),"filterRecursiveRelationships"),S=n((a,d="	")=>a.split(`
`).map($=>d+$).join(`
`),"tab"),K=n((a,d)=>Object.keys(a).map(o.toLower).includes(o.toLower(d)),"hasType"),b=n(a=>Object.entries(a).filter(([d,$])=>!o.isNil($)).reduce((d,[$,h])=>({...d,[$]:h}),{}),"clean"),m=n(a=>a.every(d=>o.get(d,"isActivated",!0)),"checkAllKeysActivated"),c=n(a=>a.length?a.every(d=>!o.get(d,"isActivated",!0)):!1,"checkAllKeysDeactivated"),r=n((a,d)=>{let $=a.filter(v=>o.get(v,"isActivated",!0)).map(d),h=a.filter(v=>!o.get(v,"isActivated",!0)).map(d);return{activatedItems:$,deactivatedItems:h}},"divideIntoActivatedAndDeactivated"),u=n((a,{isActivated:d,isPartOfLine:$,inlineComment:h="--"})=>a?d!==!1?a:$?"/* "+a+" */":a.includes(`
`)?`/*
`+a+` */
`:h+" "+a:"","commentIfDeactivated"),s=n((a,d="'",$="'")=>{let h=a[0];return a[a.length-1]===d&&h===$?a:`${d}${a}${$}`},"wrap"),p=n((a,d)=>d.some($=>(a==null?void 0:a.oldField[$])!==(a==null?void 0:a.newField[$])),"checkFieldPropertiesChanged"),i=n(a=>o.map(a,d=>{let $=d.defaultExpression?`DEFAULT ${d.defaultExpression}`:"";return o.trim(`${d.argumentMode} ${d.argumentName||""} ${d.argumentType} ${$}`)}).join(", "),"getFunctionArguments"),L=n((a,d)=>d?`${T(d)}.${T(a)}`:T(a),"getNamePrefixedWithSchemaName"),T=n(a=>/\s|\W/.test(a)||o.includes(Ct,o.toUpper(a))?`"${a}"`:a,"wrapInQuotes"),M=n(({name:a})=>T(a),"columnMapToString"),U=n((a,d,$,h=M)=>{var W;let v=r(a,h),Z=(W=v==null?void 0:v.deactivatedItems)!=null&&W.length?u(v.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!d&&$?" ("+v.activatedItems.join(", ")+Z+")":" ("+a.map(h).join(", ")+")"},"getColumnsList"),re=n(a=>a?a.alias?`${T(a.name)} as ${T(a.alias)}`:T(a.name):"","getKeyWithAlias"),ae=n(a=>Array.isArray(a)?a.reduce((d,$)=>{if(!$.tableName)return d.columns.push(re($)),d;let h=`${T($.dbName)}.${T($.tableName)}`;return d.tables.includes(h)||d.tables.push(h),d.columns.push({statement:`${h}.${re($)}`,isActivated:$.isActivated}),d},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData"),w=n((a="")=>a.replace($t,d=>`\\${d}`),"prepareComment"),y=n(a=>`E'${w(JSON.stringify(a)).slice(1,-1)}'`,"wrapComment"),C=n(a=>{var v;let d={...a,...o.omit(a==null?void 0:a.role,"properties")||{}},$=f(d),h=(v=d.compMod)==null?void 0:v.keyspaceName;return L($,h)},"getFullTableName");return{getDbName:A,getDbData:O,getEntityName:f,getViewName:l,getViewOn:R,rejectRecursiveRelationships:I,filterRecursiveRelationships:F,tab:S,hasType:K,clean:b,checkAllKeysActivated:m,checkAllKeysDeactivated:c,divideIntoActivatedAndDeactivated:r,commentIfDeactivated:u,wrap:s,checkFieldPropertiesChanged:p,getFullTableName:C,getFullColumnName:n((a,d)=>`${C(a)}.${T(d)}`,"getFullColumnName"),getFullViewName:n(a=>{var v;let d={...a,...o.omit(a==null?void 0:a.role,"properties")||{}},$=l(d),h=(v=d.compMod)==null?void 0:v.keyspaceName;return L($,h)},"getFullViewName"),getFunctionArguments:i,getNamePrefixedWithSchemaName:L,wrapInQuotes:T,getColumnsList:U,getViewData:ae,wrapComment:y,getUdtName:n(a=>a.code||a.name,"getUdtName"),getSchemaOfAlterCollection:n(a=>({...a,...o.omit(a==null?void 0:a.role,"properties")||{}}),"getSchemaOfAlterCollection"),getFullCollectionName:n(a=>{var h;let d=f(a),$=(h=a.compMod)==null?void 0:h.keyspaceName;return L(d,$)},"getFullCollectionName")}}});var Fe=_((Yt,Ue)=>{"use strict";var Pe=n((o="")=>new RegExp("\\$\\{(.*?)\\}",o),"template"),ft=n(o=>o.match(Pe("gi"))||[],"getAllTemplates"),Ot=n(o=>(o.match(Pe("i"))||[])[1],"parseTemplate"),Rt=n((o,A)=>ft(o).reduce((f,l)=>{let O=Ot(l);return f.replace(l,()=>A[O]||A[O]===0?A[O]:"")},o),"assignTemplates");Ue.exports=Rt});var Me=_((xt,Ke)=>{"use strict";Ke.exports=({_:o,commentIfDeactivated:A,checkAllKeysDeactivated:f,assignTemplates:l,wrapInQuotes:O,getColumnsList:R})=>({generateConstraintsString:n((c,r)=>{var i,L;let u=A(((c==null?void 0:c.deactivatedItems)||[]).join(`,
	`),{isActivated:!r,isPartOfLine:!0}),s=(i=c==null?void 0:c.activatedItems)!=null&&i.length?`,
	`+c.activatedItems.join(`,
	`):"",p=(L=c==null?void 0:c.deactivatedItems)!=null&&L.length?`
	`+u:"";return s+p},"generateConstraintsString"),foreignKeysToString:n(c=>{if(Array.isArray(c)){let r=c.filter(p=>o.get(p,"isActivated",!0)).map(p=>O(o.trim(p.name))),u=c.filter(p=>!o.get(p,"isActivated",!0)).map(p=>O(o.trim(p.name))),s=u.length?A(u,{isActivated:!1,isPartOfLine:!0}):"";return r.join(", ")+s}return c},"foreignKeysToString"),foreignActiveKeysToString:n(c=>c.map(r=>o.trim(r.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:n((c,r)=>u=>{let s=O(o.trim(u.name)),p=f(u.columns||[]),i=o.isEmpty(u.columns)?"":R(u.columns,p,r),L=u.include.length?` INCLUDE${R(u.include,p,r)}`:"",T=u.storageParameters?` WITH (${u.storageParameters})`:"",M=u.tablespace?` USING INDEX TABLESPACE ${O(u.tablespace)}`:"";return{statement:l(c.createKeyConstraint,{constraintName:u.name?`CONSTRAINT ${s} `:"",keyType:u.keyType,columns:i,includeNonKey:L,storageParameters:T,tablespace:M}),isActivated:!p}},"createKeyConstraint"),getConstraintsWarnings:n((c=[])=>o.isEmpty(c)?"":`
	`+c.map(r=>{let u=r.name?` [constraint name: ${r.name}]`:"";return`-- ${r.errorMessage}${u}`}).join(`
	`),"getConstraintsWarnings"),additionalPropertiesForForeignKey:n(c=>{let r=o.get(c,"relationshipOnDelete",""),u=o.get(c,"relationshipOnUpdate",""),s=o.get(c,"relationshipMatch",""),p=o.get(c,"deferrable",""),i=o.get(c,"deferrableConstraintCheckTime","");return{foreignOnDelete:r,foreignOnUpdate:u,foreignMatch:s,deferrable:p,deferrableConstraintCheckTime:i}},"additionalPropertiesForForeignKey")})});var Ye=_((kt,ve)=>{"use strict";ve.exports=(o,A)=>{let f=n((s,p)=>Object.entries(s.properties).map(p),"mapProperties"),l=n(s=>s.compositeUniqueKey?!1:!!s.unique,"isUniqueKey"),O=n(s=>{var p,i;return l(s)&&(((p=s.uniqueKeyOptions)==null?void 0:p.length)===1&&!((i=o.first(s.uniqueKeyOptions))!=null&&i.constraintName)||o.isEmpty(s.uniqueKeyOptions))},"isInlineUnique"),R=n(s=>s.compositeUniqueKey||s.compositePrimaryKey?!1:!!s.primaryKey,"isPrimaryKey"),I=n(s=>{var p;return R(s)&&!((p=o.first(s.primaryKeyOptions))!=null&&p.constraintName)},"isInlinePrimaryKey"),F=n((s,p,i,L)=>A({keyType:"UNIQUE",name:s.constraintName,columns:[{name:p,isActivated:i}],include:m(s.indexInclude||[],L),storageParameters:s.indexStorageParameters,comment:s.indexComment,tablespace:s.indexTablespace}),"hydrateUniqueOptions"),S=n((s,p,i,L)=>A({keyType:"PRIMARY KEY",name:s.constraintName,columns:[{name:p,isActivated:i}],include:m(s.indexInclude||[],L),storageParameters:s.indexStorageParameters,comment:s.indexComment,tablespace:s.indexTablespace}),"hydratePrimaryKeyOptions"),K=n((s,p)=>Object.keys(p).find(i=>p[i].GUID===s),"findName"),b=n((s,p)=>o.get(Object.values(p).find(i=>i.GUID===s),"isActivated",!0),"checkIfActivated"),m=n((s,p)=>o.map(s,i=>({name:K(i.keyId,p.properties),isActivated:b(i.keyId,p.properties)})),"getKeys"),c=n(s=>Array.isArray(s.primaryKey)?s.primaryKey.map(p=>o.isEmpty(p.compositePrimaryKey)?{name:p.constraintName,errorMessage:"A primary key constraint cannot be created without any primary key selected"}:{...S(p,null,null,s),columns:m(p.compositePrimaryKey,s)}):[],"getCompositePrimaryKeys"),r=n(s=>Array.isArray(s.uniqueKey)?s.uniqueKey.map(p=>o.isEmpty(p.compositeUniqueKey)?{name:p.constraintName,errorMessage:"A unique key constraint cannot be created without any unique key selected"}:{...F(p,null,null,s),columns:m(p.compositeUniqueKey,s)}):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:n(s=>{if(!s.properties)return[];let p=f(s,([L,T])=>{if(!(!R(T)||I(T)))return S(o.first(T.primaryKeyOptions),L,T.isActivated,s)}).filter(Boolean),i=o.flatten(f(s,([L,T])=>!l(T)||O(T)?[]:(T.uniqueKeyOptions||[]).map(M=>F(M,L,T.isActivated,s)))).filter(Boolean);return[...p,...c(s),...i,...r(s)]},"getTableKeyConstraints"),isInlineUnique:O,isInlinePrimaryKey:I,getKeys:m,hydratePrimaryKeyOptions:S,hydrateUniqueOptions:F}}});var xe=_((Dt,Ve)=>{"use strict";Ve.exports=({_:o,templates:A,assignTemplates:f,getFunctionArguments:l,getNamePrefixedWithSchemaName:O,wrapComment:R})=>{let I=n((T,M)=>o.map(M,U=>{let re=U.functionOrReplace?" OR REPLACE":"",ae=f(A.createFunction,{name:O(U.name,T),orReplace:re,parameters:l(U.functionArguments),returnType:U.functionReturnsSetOf?`SETOF ${U.functionReturnType}`:U.functionReturnType,language:U.functionLanguage,properties:F(U),definition:U.functionBody}),w=U.functionDescription?f(A.comment,{object:"FUNCTION",objectName:O(U.name,T),comment:R(U.functionDescription)}):"";return[ae,w].filter(Boolean).join(`
`)}).join(`
`),"getFunctionsScript"),F=n(T=>{let M=n(U=>U?`	${U}
`:"","wrap");return[{key:"functionWindow",getValue:S},{key:"functionVolatility",getValue:K},{key:"functionLeakProof",getValue:b},{key:"functionNullArgs",getValue:m},{key:"functionSqlSecurity",getValue:c},{key:"functionParallel",getValue:r},{key:"functionExecutionCost",getValue:u},{key:"functionExecutionRows",getValue:s},{key:"functionSupportFunction",getValue:p},{key:"functionConfigurationParameters",getValue:i}].map(U=>M(U.getValue(T[U.key],T))).filter(Boolean).join("")},"getProperties"),S=n((T,M)=>M.language!=="c"||!T?"":"WINDOW","getWindow"),K=n(T=>T,"getVolatility"),b=n(T=>T?"LEAKPROOF":"NOT LEAKPROOF","getLeakProof"),m=n(T=>T,"getNullArgs"),c=n(T=>{if(T)return`SECURITY ${T}`},"getSqlSecurity"),r=n(T=>{if(T)return`PARALLEL ${T}`},"getParallel"),u=n(T=>{if(T)return`COST ${T}`},"getExecutionCost"),s=n((T,M)=>!T||!M.functionReturnsSetOf&&!L(M)?"":`ROWS ${T}`,"getExecutionRows"),p=n(T=>{if(T)return`SUPPORT ${T}`},"getSupportFunction"),i=n(T=>{if(T)return`SET ${T}`},"getConfigurationParameters"),L=n(T=>(T.functionReturnType||"").trim().toUpperCase().startsWith("TABLE"),"isFunctionReturnsTable");return{getFunctionsScript:I}}});var ke=_((qt,_e)=>{"use strict";_e.exports=({_:o,templates:A,assignTemplates:f,getFunctionArguments:l,getNamePrefixedWithSchemaName:O})=>({getProceduresScript:n((I,F)=>o.map(F,S=>{let K=S.orReplace?" OR REPLACE":"";return f(A.createProcedure,{name:O(S.name,I),orReplace:K,parameters:l(S.inputArgs),language:S.language,body:S.body})}).join(`
`),"getProceduresScript")})});var De=_((Gt,Be)=>{"use strict";Be.exports=({_:o,getColumnsList:A,checkAllKeysDeactivated:f})=>{let l=n((m,c)=>m?" TEMPORARY":c?" UNLOGGED":"","getTableTemporaryValue"),O=n(m=>{let c=n(u=>u?`${u}
`:"","wrap"),r=[{key:"partitionBounds",getValue:S("")},{key:"partitioning",getValue:R},{key:"usingMethod",getValue:S("USING")},{key:"storage_parameter",getValue:b},{key:"on_commit",getValue:F},{key:"table_tablespace_name",getValue:S("TABLESPACE")},{key:"selectStatement",getValue:S("AS")}].map(u=>c(u.getValue(m[u.key],m))).filter(Boolean).join("");return o.trim(r)?` ${o.trim(r)}`:""},"getTableOptions"),R=n((m,{isActivated:c})=>{if(m&&m.partitionMethod){let r=m.partitionBy==="keys"?I(m,c):` (${m.partitioning_expression})`;return`PARTITION BY ${m.partitionMethod}${r}`}},"getPartitioning"),I=n((m,c)=>{let r=f(m.compositePartitionKey);return A(m.compositePartitionKey,r,c)},"getPartitionKeys"),F=n((m,c)=>{if(m&&c.temporary)return`ON COMMIT ${m}`},"getOnCommit"),S=n(m=>c=>{if(c)return`${m} ${c}`},"getBasicValue"),K=["toast_autovacuum_enabled","toast_vacuum_index_cleanup","toast_vacuum_truncate","toast_autovacuum_vacuum_threshold","toast_autovacuum_vacuum_scale_factor","toast_autovacuum_vacuum_insert_threshold","toast_autovacuum_vacuum_insert_scale_factor","toast_autovacuum_vacuum_cost_delay","toast_autovacuum_vacuum_cost_limit","toast_autovacuum_freeze_min_age","toast_autovacuum_freeze_max_age","toast_autovacuum_freeze_table_age","toast_autovacuum_multixact_freeze_min_age","toast_autovacuum_multixact_freeze_max_age","toast_autovacuum_multixact_freeze_table_age","toast_log_autovacuum_min_duration"],b=n(m=>{if(o.isEmpty(m))return"";let c=["autovacuum","toast","id"];return o.chain(m).toPairs().flatMap(([r,u])=>r==="autovacuum"||r==="toast"?o.toPairs(u):[[r,u]]).reject(([r])=>o.includes(c,r)).map(([r,u])=>{if(!(!u&&u!==0))return o.includes(K,r)?`toast.${r.slice(6)}=${u}`:`${r}=${u}`}).compact().join(`,
	`).trim().thru(r=>{if(r)return`WITH (
	${r}
)`}).value()},"getStorageParameters");return{getTableTemporaryValue:l,getTableOptions:O}}});var qe=_((wt,He)=>{"use strict";He.exports=({_:o,commentIfDeactivated:A,assignTemplates:f,templates:l,getNamePrefixedWithSchemaName:O,wrapComment:R})=>{let I=["composite","enum","range_udt","domain"],F=n((r,u)=>{let s=O(r.name,r.schemaName),p=f(l.comment,{object:"TYPE",objectName:s,comment:R(r.comment)});switch(r.type){case"composite":return f(l.createCompositeType,{name:s,columnDefinitions:o.join(u,`,
	`),comment:r.comment?p:""});case"enum":return f(l.createEnumType,{name:s,values:o.map(r.enum,i=>`'${i}'`).join(", "),comment:r.comment?p:""});case"range_udt":return f(l.createRangeType,{name:s,subtype:r.rangeSubtype,options:K(r),comment:r.comment?p:""});case"domain":{let i=f(l.comment,{object:"DOMAIN",objectName:s,comment:R(r.comment)});return f(l.createDomainType,{name:s,underlyingType:r.underlyingType,notNull:r.nullable?"":" NOT NULL",collate:r.collation?`
	COLLATE ${r.collation}`:"",default:r.default?`
	DEFAULT ${r.default}`:"",constraints:b(r),comment:r.comment?i:""})}default:return""}},"getPlainUdt"),S=n(r=>I.includes(r.type),"isNotPlainType"),K=n(r=>{let u=n(p=>p?`	${p}`:"","wrap"),s=[{key:"operatorClass",getValue:m("SUBTYPE_OPCLASS")},{key:"collation",getValue:m("COLLATION")},{key:"canonicalFunction",getValue:m("CANONICAL")},{key:"subtypeDiffFunction",getValue:m("SUBTYPE_DIFF")},{key:"multiRangeType",getValue:m("MULTIRANGE_TYPE_NAME")}].map(p=>u(p.getValue(r[p.key]))).filter(Boolean).join(`,
`);return o.trim(s)?`,
	`+o.trim(s):""},"getRangeOptions"),b=n(r=>o.map(r.checkConstraints,u=>u.name?`
	CONSTRAINT ${u.name} CHECK (${u.expression})`:`
	CHECK (${u.expression})`).join(""),"getDomainConstraints"),m=n(r=>u=>{if(u)return`${r}=${u}`},"getBasicValue");return{getUserDefinedType:n((r,u)=>A(F(r,u),{isActivated:r.isActivated}),"getUserDefinedType"),isNotPlainType:S}}});var Ge=_((zt,We)=>{"use strict";We.exports=({_:o,wrapInQuotes:A,checkAllKeysDeactivated:f,getColumnsList:l})=>{let O=n(({name:b,sortOrder:m,nullsOrder:c,collation:r,opclass:u})=>{let s=m?` ${m}`:"",p=c?` ${c}`:"",i=o.includes(r,'"')?r:`"${r}"`,L=r?` COLLATE ${i}`:"",T=u?` ${u}`:"";return`${A(b)}${L}${T}${s}${p}`},"mapIndexKey"),R=n((b=[],m)=>{let c=f(b);return l(b,c,m,O)},"getIndexKeys"),I=n((b,m)=>{var L;let c=l(b.include||[],f(b.include||[]),m),r=(L=b.include)!=null&&L.length?` INCLUDE ${o.trim(c)}`:"",u=S(b),s=u?` WITH (
	${u})`:"",p=b.index_tablespace_name?` TABLESPACE ${b.index_tablespace_name}`:"",i=b.where?` WHERE ${b.where}`:"";return o.compact([" ",r,s,p,i]).join(`
`)},"getIndexOptions"),F={btree:{index_fillfactor:"fillfactor",deduplicate_items:"deduplicate_items"},hash:{index_fillfactor:"fillfactor"},gin:{fastupdate:"fastupdate",gin_pending_list_limit:"gin_pending_list_limit"},brin:{pages_per_range:"pages_per_range",autosummarize:"autosummarize"}},S=n(b=>{let m=F[b.index_method];return o.chain(m).toPairs().map(([c,r])=>{let u=b.index_storage_parameter[c];if(!(o.isNil(u)||u===""))return`${r}=${K(u)}`}).compact().join(`,
	`).value()},"getWithOptions"),K=n(b=>o.isBoolean(b)?b?"ON":"OFF":b,"getValue");return{getIndexKeys:R,getIndexOptions:I}}});var we=_((Qt,je)=>{"use strict";je.exports=({_:o,wrap:A,assignTemplates:f,templates:l,commentIfDeactivated:O,wrapComment:R,wrapInQuotes:I})=>{let F=n((y,C)=>`${y}(${C})`,"addLength"),S=n((y,C,V)=>o.isNumber(V)?`${y}(${C},${V})`:`${y}(${C})`,"addScalePrecision"),K=n((y,C)=>o.isNumber(C)?`${y}(${C})`:y,"addPrecision"),b=n((y,C)=>C?`${y} ${C}`:y,"addWithTimezone"),m=n(({type:y,typeModifier:C,srid:V})=>{let q=V?`, ${V}`:"";return C&&C!==""?`${y}(${C}${q})`:y},"addTypeModifier"),c=n((y,C)=>{let V=(C==null?void 0:C.map(q=>`[${(q==null?void 0:q.array_size_limit)??""}]`).join("").trim())||"";return`${y}${V}`},"addArrayDecorator"),r=n(y=>["char","varchar","bit","varbit"].includes(y),"canHaveLength"),u=n(y=>y==="numeric","canHavePrecision"),s=n(y=>["time","timestamp"].includes(y),"canHaveTimePrecision"),p=n(y=>y==="numeric","canHaveScale"),i=n(y=>["geography","geometry"].includes(y),"canHaveTypeModifier"),L=n((y,C)=>r(y)&&o.isNumber(C.length)?F(y,C.length):u(y)&&p(y)&&o.isNumber(C.precision)?S(y,C.precision,C.scale):u(y)&&o.isNumber(C.precision)?K(y,C.precision):i(y)?m({type:y,typeModifier:C.typeModifier,srid:C.srid}):s(y)&&(o.isNumber(C.timePrecision)||C.timezone)?b(K(y,C.timePrecision),C.timezone):c(y,C.array_type),"decorateType"),T=n(y=>["char","varchar","text","bit","varbit"].includes(y),"isString"),M=n(y=>["date","time","timestamp","interval"].includes(y),"isDateTime"),U=n((y,C,V)=>{let q=["current_timestamp","current_user","null"];return(T(y)||M(y))&&!q.includes(o.toLower(C))&&!V?R(C):C},"decorateDefault"),re=n((y,C)=>o.chain(C).filter("comment").map(V=>{let q=f(l.comment,{object:"COLUMN",objectName:`${y}.${I(V.name)}`,comment:R(V.comment)});return O(q,V)}).join(`
`).value(),"getColumnComments"),ae={"v2.x":{int4multirange:"int4range",int8multirange:"int8range",nummultirange:"numrange",datemultirange:"daterange",tsmultirange:"tsrange",tstzmultirange:"tstzrange"}};return{decorateType:L,decorateDefault:U,getColumnComments:re,replaceTypeByVersion:n((y,C)=>{let V=ae[C];return o.get(V,y)||y},"replaceTypeByVersion")}}});var ze=_((en,Xe)=>{"use strict";Xe.exports=({_:o,assignTemplates:A,templates:f,getNamePrefixedWithSchemaName:l,wrap:O,commentIfDeactivated:R})=>{let I=n(({dbVersion:m,triggers:c,tableName:r})=>o.map(c,F(m,r)).join(`
`).trim(),"getTriggersScript"),F=n((m,c)=>r=>{let u=S(r),s=K(r);return A(f.createTrigger,{orReplace:r.triggerOrReplace?" OR REPLACE":"",constraint:r.triggerConstraint?" CONSTRAINT":"",actionTiming:r.triggerType??"",functionKey:m==="v2.x"?"PROCEDURE":"FUNCTION",functionName:r.triggerFunction,name:r.name,tableName:c,events:u,options:s})},"getTriggerScript"),S=n(m=>{var c;return(c=m.triggerEvents)==null?void 0:c.map(r=>{if(r.triggerEvent!=="UPDATE"||o.isEmpty(m.triggerUpdateColumns))return r.triggerEvent;let u=o.chain(m.triggerUpdateColumns).filter("isActivated").map(({name:i})=>i).join(", ").thru(i=>i&&`OF ${i}`).value(),s=o.chain(m.triggerUpdateColumns).reject("isActivated").map(({name:i})=>i).join(", ").thru(i=>!u&&i?`OF ${i}`:i).value(),p=s&&R(s,{isActivated:!1,isPartOfLine:!0});return`UPDATE ${u} ${p}`}).join(" OR ")},"getTriggerEvents"),K=n(m=>{let c="";if(m.triggerConstraint&&(m.triggerReferencedTable&&(c+=O(`FROM ${m.triggerReferencedTable}`,"	",`
`)),c+=O(m.triggerDeferrable?"DEFERRABLE":"NOT DEFERRABLE","	",`
`),m.triggerDeferrable&&m.triggerTimeConstraintCheck&&(c+=O(m.triggerTimeConstraintCheck,"	",`
`))),m.triggerReferencing){let r="REFERENCING";m.triggerBeforeImageTransitionRelation&&(r+=` OLD TABLE ${m.triggerBeforeImageTransitionRelation}`),m.triggerAfterImageTransitionRelation&&(r+=` NEW TABLE ${m.triggerAfterImageTransitionRelation}`),c+=O(r,"	",`
`)}return c+=O(m.triggerConstraint||m.triggerType==="INSTEAD OF"?"FOR EACH ROW":m.triggerEachRowStatement||"FOR EACH STATEMENT","	",`
`),m.triggerCondition&&(c+=O(`WHEN ${m.triggerCondition}`,"	",`
`)),c},"getTriggerOptions");return{getTriggersScript:I,hydrateTriggers:n((m,c={})=>{var r;return(((r=o.find(m,"triggers"))==null?void 0:r.triggers)||[]).map(u=>{let s=c[u.triggerReferencedTable];if(!s)return{...u,triggerReferencedTable:""};let p=l(s.code||s.collectionName,s.bucketName);return{...u,triggerReferencedTable:p}})},"hydrateTriggers")}}});var Qe=_((nn,Ze)=>{"use strict";Ze.exports=()=>({getLocaleProperties:n(A=>{let f=["v13.x","v14.x"].includes(A.dbVersion);return f&&A.locale?{locale:A.locale}:!f&&A.locale?{collate:A.locale,characterClassification:A.locale}:{collate:A.collate,characterClassification:A.characterClassification}},"getLocaleProperties")})});var tt=_((an,et)=>{"use strict";var bt=Ae(),Je=$e(),N=Oe(),{joinActivatedAndDeactivatedStatements:It}=be();et.exports=(o,A,f)=>{let l=f.require("lodash"),{tab:O,commentIfDeactivated:R,checkAllKeysDeactivated:I,divideIntoActivatedAndDeactivated:F,hasType:S,wrap:K,clean:b,getFunctionArguments:m,wrapInQuotes:c,getNamePrefixedWithSchemaName:r,getColumnsList:u,getViewData:s,wrapComment:p}=he()(l),i=Fe(),{generateConstraintsString:L,foreignKeysToString:T,foreignActiveKeysToString:M,createKeyConstraint:U,getConstraintsWarnings:re,additionalPropertiesForForeignKey:ae}=Me()({_:l,commentIfDeactivated:R,checkAllKeysDeactivated:I,assignTemplates:i,getColumnsList:u,wrapInQuotes:c}),w=Ye()(l,b),{getFunctionsScript:y}=xe()({_:l,templates:N,assignTemplates:i,getFunctionArguments:m,getNamePrefixedWithSchemaName:r,wrapComment:p}),{getProceduresScript:C}=ke()({_:l,templates:N,assignTemplates:i,getFunctionArguments:m,getNamePrefixedWithSchemaName:r}),{getTableTemporaryValue:V,getTableOptions:q}=De()({_:l,checkAllKeysDeactivated:I,getColumnsList:u}),{getUserDefinedType:le,isNotPlainType:pe}=qe()({_:l,commentIfDeactivated:R,assignTemplates:i,templates:N,getNamePrefixedWithSchemaName:r,wrapComment:p}),{getIndexKeys:Te,getIndexOptions:a}=Ge()({_:l,wrapInQuotes:c,checkAllKeysDeactivated:I,getColumnsList:u}),{decorateType:d,decorateDefault:$,getColumnComments:h,replaceTypeByVersion:v}=we()({_:l,wrap:K,assignTemplates:i,templates:N,commentIfDeactivated:R,wrapInQuotes:c,wrapComment:p}),{getTriggersScript:Z,hydrateTriggers:W}=ze()({_:l,wrap:K,assignTemplates:i,templates:N,getNamePrefixedWithSchemaName:r,commentIfDeactivated:R}),{getLocaleProperties:nt}=Qe()();return{createDatabase(e){if(!e.databaseName)return"";let{locale:t,collate:g,characterClassification:E}=nt(e);return i(N.createDatabase,{name:c(e.databaseName),template:e.template?`
	TEMPLATE ${e.template}`:"",encoding:e.encoding?`
	ENCODING ${e.encoding}`:"",locale:t?`
	LOCALE '${e.locale}'`:"",collate:g?`
	LC_COLLATE '${e.collate}'`:"",characterClassification:E?`
	LC_CTYPE '${E}'`:"",tablespace:e.tablespace?`
	TABLESPACE '${e.tablespace}'`:""})},createSchema({schemaName:e,ifNotExist:t,comments:g,udfs:E,procedures:P}){let k=i(N.comment,{object:"SCHEMA",objectName:c(e),comment:p(g)}),Y=i(N.createSchema,{name:c(e),ifNotExist:t?" IF NOT EXISTS":"",comment:g?k:""}),x=y(e,E),H=C(e,P);return l.chain([Y,x,H]).compact().map(l.trim).join(`

`).trim().value()},createTable({name:e,columns:t,checkConstraints:g,foreignKeyConstraints:E,schemaData:P,columnDefinitions:k,keyConstraints:Y,inherits:x,description:H,ifNotExist:j,usingMethod:Q,on_commit:X,partitioning:G,storage_parameter:ie,table_tablespace_name:te,temporary:J,unlogged:ne,selectStatement:ee,triggers:z,partitionOf:B,partitionBounds:D},oe){let ue=j?" IF NOT EXISTS":"",me=r(e,P.schemaName),rt=i(N.comment,{object:"TABLE",objectName:me,comment:p(H)}),at=F(Y.filter(({errorMessage:se})=>!se).map(U(N,oe)),se=>se.statement),ot=re(Y.filter(({errorMessage:se})=>se)),ce=`${L(at,oe)}${ot}`,ge=B?ce==null?void 0:ce.slice(1):ce,it=F(E,se=>se.statement),de=L(it,oe),st=`
`+h(me,k),ct=B?N.createTablePartitionOf:N.createTable,mt=B&&!ce?`
	`:`,
	`,Ee=l.isEmpty(g)?"":K(l.join(g,`,
	`),mt,""),ye=B&&!ge&&!Ee&&!de,ut=ye?"":"(",lt=ye?"":")",pt=It({statements:t,indent:`
	`}),Tt=i(ct,{temporary:V(J,ne),ifNotExist:ue,name:me,columnDefinitions:B?"":"	"+pt,keyConstraints:ge,checkConstraints:Ee,foreignKeyConstraints:de,options:q({inherits:x,partitioning:G,usingMethod:Q,on_commit:X,storage_parameter:ie,table_tablespace_name:te,selectStatement:ee,partitionBounds:D}),comment:H?rt:"",partitionOf:B?` PARTITION OF ${B} `:"",columnDescriptions:st,openParenthesis:ut,closeParenthesis:lt}),gt=Z({dbVersion:P.dbVersion,tableName:me,triggers:z});return R([Tt,gt].map(l.trim).join(`

`).trim()+`
`,{isActivated:oe})},convertColumnDefinition(e){let t=v(e.type,e.dbVersion),g=e.nullable?"":" NOT NULL",E=e.primaryKey?" "+U(N,!0)(e.primaryKeyOptions).statement:"",P=e.unique?" "+U(N,!0)(e.uniqueKeyOptions).statement:"",k=e.collationRule?` COLLATE "${e.collationRule}"`:"",Y=Array.isArray(e.array_type)&&e.array_type.length>0,x=l.isUndefined(e.default)?"":" DEFAULT "+$(t,e.default,Y);return R(i(N.columnDefinition,{name:c(e.name),type:d(t,e),notNull:g,primaryKey:E,uniqueKey:P,collation:k,defaultValue:x}),{isActivated:e.isActivated})},createIndex(e,t,g,E=!0){let P=c(t.indxName),k=t.unique&&t.index_method==="btree"?" UNIQUE":"",Y=t.concurrently?" CONCURRENTLY":"",x=t.ifNotExist?" IF NOT EXISTS":"",H=t.only?" ONLY":"",j=t.index_method?` USING ${l.toUpper(t.index_method)}`:"",Q=Te(t.index_method==="btree"?t.columns:l.map(t.columns,G=>l.omit(G,"sortOrder","nullsOrder")),E),X=a(t,E);return R(i(N.index,{unique:k,concurrently:Y,ifNotExist:x,name:P,only:H,using:j,keys:Q,options:X,tableName:r(e,t.schemaName)}),{isActivated:t.isActivated})},createCheckConstraint(e){return i(N.checkConstraint,{name:e.name?`CONSTRAINT ${c(e.name)}`:"",expression:l.trim(e.expression).replace(/^\(([\s\S]*)\)$/,"$1")})},createForeignKeyConstraint({name:e,foreignKey:t,primaryTable:g,primaryKey:E,primaryTableActivated:P,foreignTableActivated:k,foreignSchemaName:Y,primarySchemaName:x,customProperties:H,isActivated:j},Q,X){let G=I(E),ie=I(t),te=!G&&!ie&&P&&k,{foreignOnDelete:J,foreignOnUpdate:ne,foreignMatch:ee,deferrable:z,deferrableConstraintCheckTime:B}=ae(H),D=i(N.createForeignKeyConstraint,{primaryTable:r(g,x||X.schemaName),name:e?`CONSTRAINT ${c(e)}`:"",foreignKey:te?T(t):M(t),primaryKey:te?T(E):M(E),onDelete:J?` ON DELETE ${J}`:"",onUpdate:ne?` ON UPDATE ${ne}`:"",match:ee?` MATCH ${ee}`:"",deferrable:z?` ${z}`:"",deferrableConstraintCheckTime:z==="DEFERRABLE"&&B?` ${B}`:""});return{statement:l.trim(D),isActivated:te&&j}},createForeignKey({name:e,foreignTable:t,foreignKey:g,primaryTable:E,primaryKey:P,primaryTableActivated:k,foreignTableActivated:Y,foreignSchemaName:x,primarySchemaName:H,customProperties:j,isActivated:Q},X,G){let ie=I(P),te=I(g),J=!ie&&!te&&k&&Y,{foreignOnDelete:ne,foreignOnUpdate:ee,foreignMatch:z,deferrable:B,deferrableConstraintCheckTime:D}=ae(j),oe=i(N.createForeignKey,{primaryTable:r(E,H||G.schemaName),foreignTable:r(t,x||G.schemaName),name:e?c(e):"",foreignKey:J?T(g):M(g),primaryKey:J?T(P):M(P),onDelete:ne?` ON DELETE ${ne}`:"",onUpdate:ee?` ON UPDATE ${ee}`:"",match:z?` MATCH ${z}`:"",deferrable:B?` ${B}`:"",deferrableConstraintCheckTime:B==="DEFERRABLE"&&D?` ${D}`:""});return{statement:l.trim(oe),isActivated:J&&Q}},createView(e,t,g){var ee,z,B;let E=r(e.name,e.schemaName),P=i(N.comment,{object:"VIEW",objectName:E,comment:p(e.comment)}),Y=I(e.keys||[])||!g,{columns:x,tables:H}=s(e.keys),j=x.map(D=>D.statement).join(`,
		`);if(!Y){let D=F(x,ue=>ue.statement),oe=D.deactivatedItems.length?R(D.deactivatedItems.join(`,
		`),{isActivated:!1,isPartOfLine:!0}):"";j=D.activatedItems.join(`,
		`)+oe}let Q=l.trim(e.selectStatement)?l.trim(O(e.selectStatement)):i(N.viewSelectStatement,{tableName:H.join(", "),keys:j}),X=(ee=e.viewOptions)!=null&&ee.check_option?`check_option=${(z=e.viewOptions)==null?void 0:z.check_option}`:"",G=(B=e.viewOptions)!=null&&B.security_barrier?"security_barrier":"",ie=X||G?`
	WITH (${l.compact([X,G]).join(",")})`:"",te=n(D=>D.withCheckOption&&D.checkTestingScope?`
	WITH ${D.checkTestingScope} CHECK OPTION`:D.withCheckOption?`
	WITH CHECK OPTION`:"","getCheckOption"),J=R(i(N.createView,{name:E,orReplace:e.orReplace?" OR REPLACE":"",temporary:e.temporary?" TEMPORARY":"",checkOption:te(e),comment:e.comment?P:"",withOptions:ie,selectStatement:Q}),{isActivated:!Y}),ne=Z({dbVersion:e.dbVersion,tableName:E,triggers:e.triggers});return[J,ne].map(l.trim).join(`

`).trim()+`
`},createViewIndex(){return""},createUdt(e){let t=l.map(e.properties,this.convertColumnDefinition);return le(e,t)},getDefaultType(e){return bt[e]},dropView(e){let t={viewName:e};return i(N.dropView,t)},getTypesDescriptors(){return Je},hasType(e){return S(Je,e)},hydrateDatabase({modelData:e}){return e=l.get(e,"0",{}),{databaseName:e.database_name,tablespace:e.tablespace_name,encoding:e.encoding,template:e.template,collate:e.LC_COLLATE,characterClassification:e.LC_CTYPE,dbVersion:e.dbVersion,locale:e.locale}},hydrateColumn({columnDefinition:e,jsonSchema:t,schemaData:g,definitionJsonSchema:E={},parentJsonSchema:P}){let k=l.includes(["char","varchar","text"],e.type)?t.collationRule:"",Y=["time","timestamp"],x=l.includes(Y,e.type)?t.timePrecision:"",H=l.includes(Y,e.type)?t.timezone:"",j=e.type==="interval"?t.intervalOptions:"",Q=g.dbVersion,X=l.omit(w.hydratePrimaryKeyOptions(l.first(t.primaryKeyOptions)||{},e.name,e.isActivated,P),"columns"),G=l.omit(w.hydrateUniqueOptions(l.first(t.uniqueKeyOptions)||{},e.name,e.isActivated,P),"columns");return{name:e.name,type:e.type,primaryKey:w.isInlinePrimaryKey(t),primaryKeyOptions:X,unique:w.isInlineUnique(t),uniqueKeyOptions:G,nullable:e.nullable,default:e.default,comment:t.refDescription||t.description||E.description,isActivated:e.isActivated,scale:e.scale,precision:e.precision,length:e.length,enum:t.enum,array_type:t.array_type,unit:t.unit,rangeSubtype:t.rangeSubtype,operatorClass:t.operatorClass,collation:t.collation,canonicalFunction:t.canonicalFunction,subtypeDiffFunction:t.subtypeDiffFunction,multiRangeType:t.multiRangeType,schemaName:g.schemaName,underlyingType:t.underlyingType,checkConstraints:t.checkConstraints,typeModifier:t.typeModifier,srid:t.srid,collationRule:k,timePrecision:x,timezone:H,intervalOptions:j,dbVersion:Q}},hydrateJsonSchemaColumn(e,t){return!e.$ref||l.isEmpty(t)||pe(t)?e:(e=l.omit(e,"$ref"),{...t,...e})},hydrateIndex(e,t,g){return{...e,schemaName:g.schemaName}},hydrateViewIndex(e){return{}},hydrateCheckConstraint(e){return{name:e.chkConstrName,expression:e.constrExpression,noInherit:null}},hydrateSchema(e,t){let g=l.get(t,"modelData.0.dbVersion");return{schemaName:e.name,ifNotExist:e.ifNotExist,comments:e.description,udfs:(t==null?void 0:t.udfs)||[],procedures:(t==null?void 0:t.procedures)||[],dbVersion:g}},hydrateTable({tableData:e,entityData:t,jsonSchema:g}){let E=t[0],P=[],k=l.first(E.partitioning)||{},Y=w.getKeys(k.compositePartitionKey,g),x="",H=W(t,e.relatedSchemas);return{...e,triggers:H,partitionOf:x,keyConstraints:w.getTableKeyConstraints(g),inherits:P,selectStatement:l.trim(E.selectStatement),partitioning:l.assign({},k,{compositePartitionKey:Y}),...l.pick(E,"temporary","unlogged","description","ifNotExist","usingMethod","on_commit","storage_parameter","table_tablespace_name","partitionBounds")}},hydrateViewColumn(e){return{name:e.name,tableName:e.entityName,alias:e.alias,isActivated:e.isActivated,dbName:e.dbName}},hydrateView({viewData:e,entityData:t,relatedSchemas:g}){let E=t[0],P=W(t,g);return{name:e.name,keys:e.keys,comment:E.description,orReplace:E.orReplace,temporary:E.temporary,recursive:E.recursive,viewOptions:E.viewOptions,selectStatement:E.selectStatement,withCheckOption:E.withCheckOption,checkTestingScope:E.withCheckOption?E.checkTestingScope:"",schemaName:e.schemaData.schemaName,triggers:P}},commentIfDeactivated(e,t,g){return e},alterColumnType(e,t,g,E){let P=g;return E.length?P+=`(${E.length})`:E.precision&&E.scale?P+=`(${E.precision},${E.scale})`:E.precision&&(P+=`(${E.precision})`),i(N.alterColumnType,{tableName:e,columnName:t,dataType:P})},setNotNullConstraint(e,t){return i(N.addNotNullConstraint,{tableName:e,columnName:t})},dropNotNullConstraint(e,t){return i(N.dropNotNullConstraint,{tableName:e,columnName:t})},renameColumn(e,t,g){return i(N.renameColumn,{tableName:e,oldColumnName:t,newColumnName:g})},addCheckConstraint(e,t,g){let E={tableName:e,constraintName:t,expression:g};return i(N.addCheckConstraint,E)},dropConstraint(e,t){let g={tableName:e,constraintName:t};return i(N.dropConstraint,g)},updateTableComment(e,t){let g={tableName:e,comment:t};return i(N.updateCommentOnTable,g)},dropTableComment(e){let t={tableName:e,comment:"NULL"};return i(N.updateCommentOnTable,t)},updateColumnComment(e,t){let g={columnName:e,comment:t};return i(N.updateCommentOnColumn,g)},dropColumnComment(e){let t={columnName:e,comment:"NULL"};return i(N.updateCommentOnColumn,t)},updateSchemaComment(e,t){let g={schemaName:e,comment:t};return i(N.updateCommentOnSchema,g)},dropSchemaComment(e){let t={schemaName:e,comment:"NULL"};return i(N.updateCommentOnSchema,t)},updateViewComment(e,t){let g={viewName:e,comment:t};return i(N.updateCommentOnView,g)},dropViewComment(e){let t={viewName:e,comment:"NULL"};return i(N.updateCommentOnView,t)},createSchemaOnly(e){let t={schemaName:e};return i(N.createSchemaOnly,t)},dropSchema(e){let t={schemaName:e};return i(N.dropSchema,t)},dropTable(e){let t={tableName:e};return i(N.dropTable,t)},addColumn(e,t){let g={tableName:e,columnDefinition:t};return i(N.addColumn,g)},dropColumn(e,t){let g={tableName:e,columnName:t};return i(N.dropColumn,g)},dropDomain(e){let t={udtName:e};return i(N.dropDomain,t)},dropType(e){let t={udtName:e};return i(N.dropType,t)},alterTypeAddAttribute(e,t){let g={udtName:e,columnDefinition:t};return i(N.alterTypeAddAttribute,g)},alterTypeDropAttribute(e,t){let g={udtName:e,attributeName:t};return i(N.alterTypeDropAttribute,g)},alterTypeRenameAttribute(e,t,g){let E={udtName:e,oldAttributeName:t,newAttributeName:g};return i(N.alterTypeRenameAttribute,E)},alterTypeChangeAttributeType(e,t,g){let E={udtName:e,attributeName:t,newDataType:g};return i(N.alterTypeChangeAttributeType,E)},dropForeignKey(e,t){let g={tableName:e,fkConstraintName:t};return i(N.dropForeignKey,g)},createKeyConstraint(e,t,g){let E=U(N,t)(g);return{statement:i(N.addPkConstraint,{constraintStatement:(E.statement||"").trim(),tableName:e}),isActivated:E.isActivated}},dropPkConstraint(e,t){let g={tableName:e,constraintName:t};return i(N.dropConstraint,g)}}}});module.exports=tt();
